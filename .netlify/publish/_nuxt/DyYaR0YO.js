import{q as b,r as n,s as f,v as A,x as E,G as l,y as o,z as c,A as P,B as h,C as m,D as v,E as W}from"./CPgUx9Fx.js";function I(){const{$auth:e}=b();if(!e){const r=n(null),t=n(!1);return{user:r,currentUser:r,ready:t,isReady:t,signIn:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},signOut:async()=>{},logout:async()=>{},login:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},register:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},loginWithGoogle:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},forgotPassword:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")}}}const a=n(null),i=n(!1);f(e,r=>{a.value=r??null,i.value=!0}),A(e).then(r=>{}).catch(()=>{});const w=async()=>{const r=new l;await h(e,r)},g=async(r,t)=>{try{return await o(e,c),await v(e,r,t)}catch(s){throw s}},y=async(r,t)=>{try{return await o(e,c),await m(e,r,t)}catch(s){throw s}},d=async()=>{try{const r=new l;await o(e,c);try{return await P(e,r)}catch(t){if(t.code==="auth/popup-blocked"||t.code==="auth/popup-closed-by-user")return await h(e,r);throw t}}catch(r){throw r}},p=async r=>{try{return await E(e,r)}catch(t){throw t}},u=async()=>{try{await W(e);{const r=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s&&(s.startsWith("firebase:authUser:")||s.startsWith("firebase:"))&&r.push(s)}r.forEach(t=>localStorage.removeItem(t))}}catch(r){throw r}};return{user:a,currentUser:a,ready:i,isReady:i,signIn:w,signOut:u,logout:u,login:g,register:y,loginWithGoogle:d,forgotPassword:p}}export{I as u};
