import M from"./NY8DXe15.js";import{r as b,j as v,k as T,e as I,a2 as V,c as L,o as x,a as r,f as w,u as a,a3 as n,l,b as g,t as p,g as z}from"./B68XTRoa.js";const F=()=>{const e=b(!0),t=b(!1),f=v(()=>e.value?"":"light-theme"),s=()=>{e.value=!e.value,t.value&&(localStorage.setItem("theme",e.value?"dark":"light"),c())},u=o=>{e.value=o,t.value&&(localStorage.setItem("theme",o?"dark":"light"),c())},c=()=>{if(t.value){const o=document.documentElement;e.value?o.classList.remove("light-theme"):o.classList.add("light-theme")}},h=()=>{t.value&&(localStorage.getItem("theme")==="light"?e.value=!1:e.value=!0,c())};return T(()=>{t.value=!0,h()}),I(()=>{t.value=!1}),{isDark:e,themeClass:f,toggleTheme:s,setTheme:u,initTheme:h}},P={class:"relative"},$=["aria-expanded","aria-label"],R=["aria-label"],U=["aria-selected"],q={class:"flex items-center gap-2"},A=["aria-selected"],G={class:"flex items-center gap-2"},H=["title","aria-label"],O={__name:"CommonLangThemeSwitcher",props:{size:{type:String,default:"md"},context:{type:String,default:"header"}},setup(e){const{locale:t,setLocale:f,t:s,te:u}=V({useScope:"global"}),{isDark:c,toggleTheme:h}=F(),o=b(!1),E=b(null),j=v(()=>t?.value==="fr"?"circle-flags:fr":"circle-flags:gb"),B=v(()=>t?.value==="fr"?"FR":"EN"),k=v(()=>u&&u("app.theme.light")?s("app.theme.light"):t?.value==="fr"?"Passer au thème clair":"Switch to light theme"),C=v(()=>u&&u("app.theme.dark")?s("app.theme.dark"):t?.value==="fr"?"Passer au thème sombre":"Switch to dark theme"),N=async m=>{try{typeof f=="function"?await f(m):t&&(t.value=m)}catch{t&&(t.value=m)}},D=()=>{o.value=!o.value},S=async m=>{await N(m),o.value=!1};return T(()=>{}),I(()=>{}),(m,i)=>{const d=M;return x(),L("div",{class:"inline-flex items-center gap-2",ref_key:"rootEl",ref:E},[r("div",P,[r("button",{onClick:D,class:l(["rounded-lg border transition-colors duration-200 h-10 flex items-center gap-2",e.size==="sm"?"px-2.5":"px-3",e.context==="dropdown"?"border-transparent hover:opacity-80":"border-gray-200 bg-white hover:bg-gray-50"]),style:n(e.context==="dropdown"?{backgroundColor:"var(--button-bg)",color:"var(--text-primary)"}:{}),"aria-expanded":o.value,"aria-label":a(s)("common.language.select")},[g(d,{name:j.value,class:l(e.size==="sm"?"w-4 h-4":"w-5 h-5"),"aria-hidden":"true"},null,8,["name","class"]),r("span",{class:l(["text-xs font-medium",e.context==="dropdown"?"":"text-gray-700"])},p(B.value),3),g(d,{name:"heroicons:chevron-down",class:l(e.size==="sm"?"w-4 h-4":"w-5 h-5"),style:n(e.context==="dropdown"?{color:"var(--text-secondary)"}:{color:"#6b7280"}),"aria-hidden":"true"},null,8,["class","style"])],14,$),o.value?(x(),L("div",{key:0,class:l(["absolute right-0 mt-2 w-48 rounded-lg border shadow-lg overflow-hidden",e.context==="dropdown"?"border-transparent":"border-gray-200"]),style:n([e.context==="dropdown"?{backgroundColor:"var(--card-bg)",borderColor:"var(--card-border)"}:{},{zIndex:e.context==="dropdown"?99999:50}]),role:"menu","aria-label":a(s)("common.language.select")},[r("button",{onClick:i[0]||(i[0]=y=>S("fr")),class:l(["w-full text-left px-3 py-2 text-sm transition-colors duration-200 flex items-center justify-between",[a(t)?.value==="fr"?e.context==="dropdown"?"opacity-80":"bg-emerald-50 text-emerald-700":e.context==="dropdown"?"hover:opacity-80":"hover:bg-gray-50"]]),style:n(e.context==="dropdown"?{color:"var(--text-primary)"}:{}),"aria-selected":a(t)?.value==="fr",role:"menuitem",tabindex:"0"},[r("span",q,[g(d,{name:"circle-flags:fr",class:"w-5 h-5","aria-hidden":"true"}),r("span",null,p(a(s)("common.language.french")),1)]),a(t)?.value==="fr"?(x(),z(d,{key:0,name:"heroicons:check",style:n(e.context==="dropdown"?{color:"var(--accent-primary)"}:{color:"#059669"}),class:"w-4 h-4","aria-hidden":"true"},null,8,["style"])):w("",!0)],14,U),r("button",{onClick:i[1]||(i[1]=y=>S("en")),class:l(["w-full text-left px-3 py-2 text-sm transition-colors duration-200 flex items-center justify-between",[a(t)?.value==="en"?e.context==="dropdown"?"opacity-80":"bg-emerald-50 text-emerald-700":e.context==="dropdown"?"hover:opacity-80":"hover:bg-gray-50"]]),style:n(e.context==="dropdown"?{color:"var(--text-primary)"}:{}),"aria-selected":a(t)?.value==="en",role:"menuitem",tabindex:"0"},[r("span",G,[g(d,{name:"circle-flags:gb",class:"w-5 h-5","aria-hidden":"true"}),r("span",null,p(a(s)("common.language.english")),1)]),a(t)?.value==="en"?(x(),z(d,{key:0,name:"heroicons:check",style:n(e.context==="dropdown"?{color:"var(--accent-primary)"}:{color:"#059669"}),class:"w-4 h-4","aria-hidden":"true"},null,8,["style"])):w("",!0)],14,A)],14,R)):w("",!0)]),r("button",{onClick:i[2]||(i[2]=(...y)=>a(h)&&a(h)(...y)),class:l(["rounded-lg border transition-colors duration-200 flex items-center justify-center h-10",(e.size==="sm","w-10"),e.context==="dropdown"?"border-transparent hover:opacity-80":"border-gray-200 bg-white hover:bg-gray-50"]),style:n(e.context==="dropdown"?{backgroundColor:"var(--button-bg)",color:"var(--text-primary)"}:{}),title:a(c)?k.value:C.value,"aria-label":a(c)?k.value:C.value,role:"button",tabindex:"0"},[g(d,{name:a(c)?"heroicons:sun":"heroicons:moon",class:l([e.size==="sm"?"w-4 h-4":"w-5 h-5","transition-colors duration-200"]),style:n(e.context==="dropdown"?{color:"var(--text-primary)"}:{color:"#374151"}),"aria-hidden":"true"},null,8,["name","class","style"])],14,H)],512)}}};export{O as _,F as u};
