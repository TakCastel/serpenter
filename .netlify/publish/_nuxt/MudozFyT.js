import{$ as N,a3 as T,r,w as W,_ as F,f as V,Z as q,a2 as G,o as b,b as O,h as E,c as k,d as w,a as B,a4 as R,V as L,g as z,j as I,a0 as D,a5 as A,t as U,a6 as Z}from"./-Ay7-MNe.js";import H from"./CCn08sVd.js";const le=(l="web-prelaunch")=>{const{t:i}=N(),f=T({}),y=e=>{switch(e){case"appstore-preflight":return"/data/checklist-items-app.json";case"security-checker":return"/data/checklist-items-security.json";case"web-prelaunch":default:return"/data/checklist-items-web.json"}},v=async e=>{if(f[e])return f[e];const t=y(e),a=await $fetch(t);return f[e]=a,a},c=r(l),d=r({}),m=r(!0),p=r(null);p.value=v(c.value).then(e=>{d.value=e||{},m.value=!1}),W(c,async e=>{m.value=!0;const t=await v(e);d.value=t||{},m.value=!1});const x=e=>{c.value=e},C=async()=>{p.value&&await p.value},h=e=>{const t=d.value||{};return!t[e]||!t[e].items?[]:t[e].items.map(a=>{const S=i(a.labelKey),M=i(a.descriptionKey),P=i(a.details.explicationKey);let j=[],K=[];try{const s=a.details.commentFaireKey;if(s)for(let o=1;o<=4;o++){const g=`${s}.item${o}`,n=i(g,[],{fallback:null});n&&n!==g&&!n.startsWith("__MISSING_")&&j.push(n)}}catch{}try{const s=a.details.bonnesPratiquesKey;if(s)for(let o=1;o<=5;o++){const g=`${s}.item${o}`,n=i(g,[],{fallback:null});n&&n!==g&&!n.startsWith("__MISSING_")&&K.push(n)}}catch{}let u=null;try{const s=a.details.exempleKey;if(s){const o=i(s,[],{fallback:null});o&&o!==s&&!String(o).startsWith("__MISSING_")&&(u=o)}}catch{}return!u&&a.details.exemple&&(u=a.details.exemple),!u&&a.details.html&&(u={html:a.details.html}),{id:a.id,label:S,description:M,details:{explication:P,commentFaire:j,bonnesPratiques:K,...u?{exemple:u}:{}}}})};return{getCategoryItems:h,getAllCategories:()=>Object.keys(d.value||{}),getCategoryData:e=>({items:h(e)}),setChecklistType:x,isLoading:m,waitForData:C}},J=["aria-labelledby","aria-describedby"],Q={key:0,class:"flex items-center justify-between p-6 border-b",style:{"border-color":"var(--bg-border)"}},X=["id"],Y=["title","aria-label"],ee={class:"p-6"},te={key:1,class:"flex items-center justify-end gap-3 p-6 border-t",style:{"border-color":"var(--bg-border)"}},ae={__name:"CommonModal",props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:""},showCloseButton:{type:Boolean,default:!0},closeOnBackdrop:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},contentClass:{type:String,default:""}},emits:["close","update:isOpen"],setup(l,{emit:i}){const{t:f}=N(),y=l,v=i,c=r(null),d=r(`modal-title-${Math.random().toString(36).substr(2,9)}`),m=r(`modal-description-${Math.random().toString(36).substr(2,9)}`),p=r(""),x=r(""),C=()=>{if(typeof document<"u"){const t=window.innerWidth-document.documentElement.clientWidth;p.value=document.body.style.overflow,x.value=document.body.style.paddingRight,document.body.style.overflow="hidden",t>0&&(document.body.style.paddingRight=`${t}px`)}},h=()=>{typeof document<"u"&&(document.body.style.overflow=p.value,document.body.style.paddingRight=x.value)},_=t=>{y.closeOnEscape&&t.key==="Escape"&&y.isOpen&&e()},$=()=>{y.closeOnBackdrop&&e()},e=()=>{v("close"),v("update:isOpen",!1)};return W(()=>y.isOpen,t=>{t?(C(),Z(()=>{c.value&&c.value.focus()})):h()}),V(()=>{typeof document<"u"&&document.addEventListener("keydown",_)}),q(()=>{typeof document<"u"&&(document.removeEventListener("keydown",_),h())}),(t,a)=>{const S=H;return b(),G(A,{to:"body"},[O(R,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:E(()=>[l.isOpen?(b(),k("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:$},[B("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:$}),O(R,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 scale-95 -translate-y-4","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 scale-100 translate-y-0","leave-to-class":"opacity-0 scale-95 -translate-y-4"},{default:E(()=>[l.isOpen?(b(),k("div",{key:0,ref_key:"modalRef",ref:c,class:z(["relative w-full max-w-md mx-auto rounded-xl shadow-2xl border",l.contentClass]),style:{"background-color":"var(--bg-surface)","border-color":"var(--bg-border)"},onClick:a[1]||(a[1]=L(()=>{},["stop"])),role:"dialog","aria-modal":!0,"aria-labelledby":d.value,"aria-describedby":m.value,tabindex:"-1"},[t.$slots.header||l.title?(b(),k("div",Q,[I(t.$slots,"header",{},()=>[l.title?(b(),k("h2",{key:0,id:d.value,class:"text-lg font-semibold",style:{color:"var(--text-primary)"}},U(l.title),9,X)):w("",!0)],!0),B("button",{onClick:a[0]||(a[0]=M=>t.$emit("close")),class:"flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200",style:{"background-color":"var(--bg-surface)",border:"1px solid var(--bg-border)"},title:D(f)("modal.close"),"aria-label":D(f)("modal.close")},[O(S,{name:"heroicons:x-mark",class:"w-4 h-4"})],8,Y)])):w("",!0),B("div",ee,[I(t.$slots,"default",{},void 0,!0)]),t.$slots.footer?(b(),k("div",te,[I(t.$slots,"footer",{},void 0,!0)])):w("",!0)],10,J)):w("",!0)]),_:3})])):w("",!0)]),_:3})])}}},ne=F(ae,[["__scopeId","data-v-c91b3666"]]);export{ne as M,le as u};
