import X from"./V69RRtU6.js";import{u as de}from"./H7N3nqWo.js";import{r as g,c as s,o as t,a as e,b as C,t as c,$ as F,a0 as H,aj as se,Z as Y,h as G,n as he,_ as ue,l as U,g as Z,f as b,ag as q,ah as N,j as O,w as oe,k as ne,e as ie,af as _e,a2 as xe,a6 as re,u as te,a3 as B,F as le,ap as Ee,a1 as Ae,aq as Te,m as be}from"./CPgUx9Fx.js";import{u as me}from"./DyYaR0YO.js";import{u as Ve,M as Le}from"./BCzsGryo.js";const Me={class:"flex flex-col items-center justify-center w-full px-4 py-12"},Oe={class:"text-center w-full max-w-md"},Ue={class:"w-16 h-16 mx-auto mb-6 rounded-xl flex items-center justify-center",style:{"background-color":"var(--bg-border)"}},De={class:"text-2xl font-bold mb-3 transition-colors duration-200 tracking-tight",style:{color:"var(--text-primary)"}},qe={class:"text-sm mb-6 transition-colors duration-200 leading-relaxed max-w-sm mx-auto",style:{color:"var(--text-secondary)"}},Re={class:"w-full mx-auto space-y-4"},ze={for:"project-name",class:"block text-sm font-semibold mb-2 transition-colors duration-200",style:{color:"var(--text-primary)"}},Ne=["placeholder"],Fe={for:"project-description",class:"block text-sm font-semibold mb-2 transition-colors duration-200",style:{color:"var(--text-primary)"}},Be=["placeholder"],He=["onKeydown","disabled","aria-label"],Xe={__name:"DashboardEmptyState",emits:["create-project"],setup(o,{emit:h}){const n=h,l=de(),{currentUser:d}=me(),y=g(""),m=g(""),f=g(null),u=async()=>{if(!(!y.value.trim()||!d.value))try{const i=await l.addProjectRemote(d.value.uid,{name:y.value.trim(),description:m.value.trim(),checklistType:f.value});l.setCurrentProject(i.id),n("create-project",i),i.checklistType||await he("/select-checklist")}catch(i){console.error("Erreur lors de la création du projet:",i)}};return(i,w)=>{const I=X;return t(),s("div",Me,[e("div",Oe,[e("div",Ue,[C(I,{name:"fluent-emoji:snake",class:"w-8 h-8",style:{color:"var(--accent-primary)"},"aria-hidden":"true"})]),e("h1",De,c(i.$t("emptyState.title")),1),e("p",qe,c(i.$t("emptyState.description")),1),e("div",Re,[e("div",null,[e("label",ze,c(i.$t("projects.name")),1),F(e("input",{id:"project-name","onUpdate:modelValue":w[0]||(w[0]=_=>y.value=_),type:"text",placeholder:i.$t("projects.namePlaceholder"),class:"input w-full h-10",onKeydown:se(u,["enter"])},null,40,Ne),[[H,y.value]])]),e("div",null,[e("label",Fe,c(i.$t("projects.description")),1),F(e("textarea",{id:"project-description","onUpdate:modelValue":w[1]||(w[1]=_=>m.value=_),placeholder:i.$t("projects.descriptionPlaceholder"),rows:"3",class:"input w-full h-20 resize-none"},null,8,Be),[[H,m.value]])]),e("button",{onClick:u,onKeydown:[se(u,["enter"]),se(Y(u,["prevent"]),["space"])],disabled:!y.value.trim(),class:"btn btn-primary w-full h-10 text-sm font-semibold disabled:opacity-50 disabled:cursor-not-allowed","aria-label":i.$t("emptyState.createButton"),role:"button",tabindex:"0"},[C(I,{name:"heroicons:plus",class:"w-4 h-4 inline mr-2","aria-hidden":"true"}),G(" "+c(i.$t("emptyState.createButton")),1)],40,He)])])])}}},Ke=["aria-expanded","aria-controls","aria-label"],Ze={class:"flex items-center justify-between"},We={class:"flex items-center space-x-4 flex-1"},Je=["aria-checked","aria-label"],Qe={class:"flex-1 min-w-0"},Ge=["innerHTML"],Ye={class:"text-base transition-colors duration-200",style:{color:"var(--text-secondary)"}},et=["aria-expanded","aria-label"],tt={__name:"ChecklistItemHeader",props:{item:{type:Object,required:!0},isItemChecked:{type:Boolean,required:!0},isExpanded:{type:Boolean,required:!0}},emits:["toggle-accordion","toggle-item"],setup(o){return(h,n)=>{const l=X;return t(),s("div",{class:"p-4 cursor-pointer transition-all duration-200 hover:bg-opacity-80",onClick:n[3]||(n[3]=d=>h.$emit("toggle-accordion")),onKeydown:[n[4]||(n[4]=se(d=>h.$emit("toggle-accordion"),["enter"])),n[5]||(n[5]=se(Y(d=>h.$emit("toggle-accordion"),["prevent"]),["space"]))],role:"button","aria-expanded":o.isExpanded,"aria-controls":`item-details-${o.item.id}`,"aria-label":`${o.isExpanded?h.$t("items.accordion.closeDetails"):h.$t("items.accordion.openDetails")} de ${o.item.label}`,tabindex:"0"},[e("div",Ze,[e("div",We,[e("button",{onClick:n[0]||(n[0]=Y(d=>h.$emit("toggle-item"),["stop"])),onKeydown:[n[1]||(n[1]=se(Y(d=>h.$emit("toggle-item"),["stop"]),["enter"])),n[2]||(n[2]=se(Y(d=>h.$emit("toggle-item"),["stop","prevent"]),["space"]))],class:U(["flex-shrink-0 w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 hover:scale-105 relative overflow-hidden",{"bg-gradient-to-br from-green-400 to-green-600 shadow-lg shadow-green-500/30":o.isItemChecked,"border-gray-300 hover:border-gray-400":!o.isItemChecked}]),"aria-checked":o.isItemChecked,"aria-label":`${o.isItemChecked?h.$t("items.accordion.uncheck"):h.$t("items.accordion.check")} ${o.item.label}`,role:"checkbox",tabindex:"0"},[o.isItemChecked?(t(),Z(l,{key:0,name:"heroicons:check",class:U(["w-3 h-3 transition-all duration-300 text-white drop-shadow-sm",{"animate-bounce-in":o.isItemChecked}]),"aria-hidden":"true"},null,8,["class"])):b("",!0)],42,Je),e("div",Qe,[e("h3",{class:"text-lg font-semibold leading-tight transition-colors duration-200 mb-2",style:{color:"var(--text-primary)"},innerHTML:o.item.label},null,8,Ge),e("p",Ye,c(o.item.description),1)])]),e("button",{class:U(["flex-shrink-0 w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-200 hover:bg-opacity-80",{"rotate-180":o.isExpanded&&!o.isItemChecked}]),"aria-expanded":o.isExpanded,"aria-label":`${o.isExpanded?h.$t("items.accordion.close"):h.$t("items.accordion.open")} les détails`,"aria-hidden":"true"},[o.isItemChecked?(t(),Z(l,{key:0,name:"heroicons:check-circle",class:"w-5 h-5 transition-colors duration-200",style:{color:"var(--accent-primary)"},"aria-hidden":"true"})):(t(),Z(l,{key:1,name:"heroicons:chevron-down",class:"w-5 h-5 transition-colors duration-200",style:{color:"var(--text-muted)"},"aria-hidden":"true"}))],10,et)])],40,Ke)}}},st=ue(tt,[["__scopeId","data-v-1971e5f8"]]),ot={key:0,class:"space-y-3"},lt={class:"text-lg font-semibold transition-colors duration-200",style:{color:"var(--accent-primary)"}},at={class:"text-base leading-relaxed transition-colors duration-200",style:{color:"var(--text-secondary)"}},rt={__name:"ChecklistItemExplication",props:{explication:{type:String,default:null}},setup(o){return(h,n)=>o.explication?(t(),s("div",ot,[e("h4",lt,c(h.$t("items.details.explication")),1),e("p",at,c(o.explication),1)])):b("",!0)}},nt={key:0,class:"space-y-2"},it={class:"space-y-1",role:"list"},ct=["innerHTML"],dt={__name:"ChecklistItemCommentFaire",props:{commentFaire:{type:Array,default:()=>[]}},setup(o){return(h,n)=>{const l=X;return o.commentFaire&&o.commentFaire.length>0?(t(),s("div",nt,[n[0]||(n[0]=e("h4",{class:"text-lg font-semibold transition-colors duration-200",style:{color:"var(--accent-primary)"}}," Comment faire ",-1)),e("ul",it,[(t(!0),s(q,null,N(o.commentFaire,(d,y)=>(t(),s("li",{key:y,class:"text-sm leading-relaxed transition-colors duration-200 flex items-start space-x-2",style:{color:"var(--text-secondary)"},role:"listitem"},[C(l,{name:"heroicons:arrow-right",class:"w-4 h-4 flex-shrink-0 mt-0.5 transition-colors duration-200",style:{color:"var(--accent-primary)",position:"relative","z-index":"0"},"aria-hidden":"true"}),e("span",{innerHTML:d},null,8,ct)]))),128))])])):b("",!0)}}},ut={key:0,class:"space-y-3"},mt={class:"text-lg font-semibold transition-colors duration-200",style:{color:"var(--accent-primary)"}},vt={class:"space-y-4"},pt={key:0,class:"space-y-1"},ht={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple"},yt={style:{color:"var(--text-code)"}},ft={key:1,class:"space-y-4"},xt={key:0,class:"text-sm transition-colors duration-200",style:{color:"var(--text-muted)"}},bt={key:1,class:"space-y-1"},gt={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple"},kt={style:{color:"var(--text-code)"}},_t={key:2,class:"space-y-2"},wt={key:0,class:"space-y-1"},$t={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple HTML"},Ct={style:{color:"var(--text-code)"}},jt={key:1,class:"space-y-1"},St={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple CSS"},Pt={style:{color:"var(--text-code)"}},It={key:2,class:"space-y-1"},Et={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple JavaScript"},At={style:{color:"var(--text-code)"}},Tt={key:3,class:"space-y-1"},Vt={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple PHP"},Lt={style:{color:"var(--text-code)"}},Mt={key:4,class:"space-y-1"},Ot={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple Node.js"},Ut={style:{color:"var(--text-code)"}},Dt={key:5,class:"space-y-1"},qt={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple Apache"},Rt={style:{color:"var(--text-code)"}},zt={key:6,class:"space-y-1"},Nt={class:"text-xs p-3 rounded overflow-x-auto",style:{"background-color":"var(--bg-code)"},role:"code","aria-label":"Exemple Nginx"},Ft={style:{color:"var(--text-code)"}},Bt={key:3,class:"rounded-xl overflow-hidden",style:{"background-color":"var(--bg-code)"}},Ht=["src","alt"],Xt={__name:"ChecklistItemExemple",props:{exemple:{type:[String,Object],default:null}},setup(o){const h=o;return O(()=>h.exemple?typeof h.exemple=="string"?!0:h.exemple.code||h.exemple.exemple||h.exemple.html||h.exemple.css||h.exemple.javascript||h.exemple.php||h.exemple.nodejs||h.exemple.apache||h.exemple.nginx:!1),(n,l)=>o.exemple?(t(),s("div",ut,[e("h4",mt,c(n.$t("items.details.exemple")),1),e("div",vt,[typeof o.exemple=="string"?(t(),s("div",pt,[l[0]||(l[0]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"Exemple",-1)),e("pre",ht,[e("code",yt,c(o.exemple),1)])])):typeof o.exemple=="object"?(t(),s("div",ft,[o.exemple.description?(t(),s("div",xt,c(o.exemple.description),1)):b("",!0),o.exemple.exemple?(t(),s("div",bt,[l[1]||(l[1]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"Exemple",-1)),e("pre",gt,[e("code",kt,c(o.exemple.exemple),1)])])):b("",!0),o.exemple.code?(t(),s("div",_t,[o.exemple.code.html?(t(),s("div",wt,[l[2]||(l[2]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"HTML",-1)),e("pre",$t,[e("code",Ct,c(o.exemple.code.html),1)])])):b("",!0),o.exemple.code.css?(t(),s("div",jt,[l[3]||(l[3]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"CSS",-1)),e("pre",St,[e("code",Pt,c(o.exemple.code.css),1)])])):b("",!0),o.exemple.code.javascript?(t(),s("div",It,[l[4]||(l[4]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"JavaScript",-1)),e("pre",Et,[e("code",At,c(o.exemple.code.javascript),1)])])):b("",!0),o.exemple.code.php?(t(),s("div",Tt,[l[5]||(l[5]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"PHP",-1)),e("pre",Vt,[e("code",Lt,c(o.exemple.code.php),1)])])):b("",!0),o.exemple.code.nodejs?(t(),s("div",Mt,[l[6]||(l[6]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"Node.js",-1)),e("pre",Ot,[e("code",Ut,c(o.exemple.code.nodejs),1)])])):b("",!0),o.exemple.code.apache?(t(),s("div",Dt,[l[7]||(l[7]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"Apache",-1)),e("pre",qt,[e("code",Rt,c(o.exemple.code.apache),1)])])):b("",!0),o.exemple.code.nginx?(t(),s("div",zt,[l[8]||(l[8]=e("div",{class:"text-xs font-medium transition-colors duration-200",style:{color:"var(--text-muted)"}},"Nginx",-1)),e("pre",Nt,[e("code",Ft,c(o.exemple.code.nginx),1)])])):b("",!0)])):b("",!0),o.exemple.image?(t(),s("div",Bt,[e("img",{src:o.exemple.image,alt:o.exemple.imageAlt||"Exemple visuel",class:"w-full h-auto",loading:"lazy"},null,8,Ht)])):b("",!0)])):b("",!0)])])):b("",!0)}},Kt={key:0,class:"space-y-2"},Zt={class:"text-lg font-semibold transition-colors duration-200",style:{color:"var(--accent-primary)"}},Wt={class:"space-y-1",role:"list"},Jt={__name:"ChecklistItemBonnesPratiques",props:{bonnesPratiques:{type:Array,default:()=>[]}},setup(o){return(h,n)=>{const l=X;return o.bonnesPratiques&&o.bonnesPratiques.length>0?(t(),s("div",Kt,[e("h4",Zt,c(h.$t("items.details.bonnesPratiques")),1),e("ul",Wt,[(t(!0),s(q,null,N(o.bonnesPratiques,(d,y)=>(t(),s("li",{key:y,class:"text-sm leading-relaxed transition-colors duration-200 flex items-start space-x-2",style:{color:"var(--text-secondary)"},role:"listitem"},[C(l,{name:"heroicons:check-circle",class:"w-4 h-4 flex-shrink-0 mt-0.5 transition-colors duration-200",style:{color:"var(--accent-primary)",position:"relative","z-index":"0"},"aria-hidden":"true"}),e("span",null,c(d),1)]))),128))])])):b("",!0)}}},Qt={key:0,class:"space-y-3"},Gt={class:"text-lg font-semibold transition-colors duration-200",style:{color:"var(--accent-primary)"}},Yt={class:"space-y-3"},es=["href","title"],ts={class:"flex-1 min-w-0"},ss={class:"font-medium transition-colors duration-200",style:{color:"var(--text-primary)"}},os={class:"text-sm transition-colors duration-200",style:{color:"var(--text-muted)"}},ls={__name:"ChecklistItemRessources",props:{ressources:{type:Array,default:()=>[]}},setup(o){return(h,n)=>{const l=X;return o.ressources&&o.ressources.length>0?(t(),s("div",Qt,[e("h4",Gt,c(h.$t("items.details.ressources")),1),e("div",Yt,[(t(!0),s(q,null,N(o.ressources,d=>(t(),s("a",{key:d.url,href:d.url,target:"_blank",rel:"noopener noreferrer",class:"flex items-center space-x-3 p-4 rounded-xl transition-all duration-200 hover:bg-opacity-80",style:{"background-color":"var(--bg-surface)",border:"1px solid var(--bg-border)"},title:d.title},[C(l,{name:"heroicons:arrow-top-right-on-square",class:"w-5 h-5 flex-shrink-0 transition-colors duration-200",style:{color:"var(--accent-primary)"},"aria-hidden":"true"}),e("div",ts,[e("div",ss,c(d.title),1),e("div",os,c(d.description),1)])],8,es))),128))])])):b("",!0)}}},as={key:0,class:"space-y-3"},rs={class:"text-lg font-semibold transition-colors duration-200",style:{color:"var(--accent-primary)"}},ns={class:"space-y-3"},is={class:"text-base transition-colors duration-200",style:{color:"var(--text-secondary)"}},cs={__name:"ChecklistItemConseils",props:{conseils:{type:Array,default:()=>[]}},setup(o){return(h,n)=>{const l=X;return o.conseils&&o.conseils.length>0?(t(),s("div",as,[e("h4",rs,c(h.$t("items.details.conseils")),1),e("div",ns,[(t(!0),s(q,null,N(o.conseils,d=>(t(),s("div",{key:d,class:"flex items-start space-x-3 p-4 rounded-xl",style:{"background-color":"var(--bg-surface)",border:"1px solid var(--bg-border)"}},[C(l,{name:"heroicons:light-bulb",class:"w-5 h-5 flex-shrink-0 mt-0.5 transition-colors duration-200",style:{color:"var(--accent-primary)"},"aria-hidden":"true"}),e("p",is,c(d),1)]))),128))])])):b("",!0)}}},ds=["id","aria-label"],us={class:"p-6 space-y-6"},ms={key:0,class:"text-center py-8"},vs={class:"text-base transition-colors duration-200",style:{color:"var(--text-muted)"}},ps={__name:"ChecklistItemDetails",props:{item:{type:Object,required:!0},isExpanded:{type:Boolean,required:!0}},setup(o){return(h,n)=>(t(),s("div",{id:`item-details-${o.item.id}`,class:U(["border-t transition-all duration-700 ease-out overflow-hidden",{"max-h-0 opacity-0":!o.isExpanded,"max-h-[10000px] opacity-100":o.isExpanded}]),style:{"border-color":"var(--bg-border)","background-color":"var(--bg-primary)"},role:"region","aria-label":`Détails de ${o.item.label}`},[e("div",us,[o.item.details?b("",!0):(t(),s("div",ms,[e("p",vs,c(h.$t("items.details.noDetails")),1)])),o.item.details&&o.item.details.explication?(t(),Z(rt,{key:1,explication:o.item.details.explication},null,8,["explication"])):b("",!0),o.item.details&&o.item.details.commentFaire?(t(),Z(dt,{key:2,"comment-faire":o.item.details.commentFaire},null,8,["comment-faire"])):b("",!0),o.item.details&&o.item.details.exemple?(t(),Z(Xt,{key:3,exemple:o.item.details.exemple},null,8,["exemple"])):b("",!0),o.item.details&&o.item.details.bonnesPratiques?(t(),Z(Jt,{key:4,"bonnes-pratiques":o.item.details.bonnesPratiques},null,8,["bonnes-pratiques"])):b("",!0),o.item.details&&o.item.details.ressources?(t(),Z(ls,{key:5,ressources:o.item.details.ressources},null,8,["ressources"])):b("",!0),o.item.details&&o.item.details.conseils?(t(),Z(cs,{key:6,conseils:o.item.details.conseils},null,8,["conseils"])):b("",!0)])],10,ds))}},hs=["aria-label"],ys={__name:"ChecklistItemAccordion",props:{item:{type:Object,required:!0},isItemChecked:{type:Boolean,required:!0}},emits:["toggle-item","accordion-opened","accordion-closed"],setup(o,{emit:h}){const n=o,l=h,d=g(!1),y=()=>{n.isItemChecked||(d.value=!d.value,d.value?l("accordion-opened",n.item.id):l("accordion-closed",n.item.id))},m=()=>{n.isItemChecked?d.value=!0:d.value=!1,l("toggle-item",n.item.id)},f=i=>{i.detail.itemId===n.item.id&&(d.value=!1)},u=i=>{i.detail.itemId===n.item.id&&(d.value=!0)};return oe(()=>n.isItemChecked,(i,w)=>{i&&!w?d.value=!1:!i&&w&&(d.value=!0)}),ne(()=>{window.addEventListener("close-item-accordion",f),window.addEventListener("open-item-accordion",u)}),ie(()=>{window.removeEventListener("close-item-accordion",f),window.removeEventListener("open-item-accordion",u)}),(i,w)=>(t(),s("div",{class:"card",role:"region","aria-label":i.$t("common.item",{label:o.item.label})},[C(st,{item:o.item,"is-item-checked":o.isItemChecked,"is-expanded":d.value,onToggleAccordion:y,onToggleItem:m},null,8,["item","is-item-checked","is-expanded"]),C(ps,{item:o.item,"is-expanded":d.value},null,8,["item","is-expanded"])],8,hs))}},fs={class:"card p-12 max-w-4xl mx-auto mb-12 relative overflow-hidden",style:{background:"linear-gradient(135deg, var(--accent-primary), var(--accent-secondary))",border:"1px solid var(--bg-border)"}},xs={class:"relative z-10 text-center"},bs={class:"mb-4 flex items-center justify-center gap-3"},gs={__name:"ChecklistDeploymentReadyCard",props:{totalItems:{type:Number,required:!1,default:0},totalCategories:{type:Number,required:!1,default:0}},setup(o){return(h,n)=>{const l=X;return t(),s("div",fs,[e("div",xs,[e("div",bs,[C(l,{name:"fluent-emoji:check-mark-button",class:"w-8 h-8","aria-hidden":"true"}),n[0]||(n[0]=e("h1",{class:"text-4xl md:text-5xl font-bold text-white"}," Félicitations ! ",-1))]),n[1]||(n[1]=e("h2",{class:"text-2xl md:text-3xl font-semibold mb-6 text-white/90"}," Votre site est prêt pour le déploiement ",-1)),n[2]||(n[2]=e("p",{class:"text-lg md:text-xl text-white/90 max-w-2xl mx-auto leading-relaxed"}," Toutes les catégories sont complétées. Vous pouvez lancer le déploiement en toute confiance. ",-1))])])}}},ks={class:"rounded-lg border animate-pulse",style:{"background-color":"var(--bg-primary)","border-color":"var(--bg-border)"}},_s={__name:"CommonSkeletonCategory",setup(o){return(h,n)=>(t(),s("div",ks,n[0]||(n[0]=[_e('<div class="p-6"><div class="flex items-center justify-between"><div class="flex items-center space-x-4"><div class="w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 animate-pulse"></div><div class="space-y-2"><div class="h-6 w-32 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"></div><div class="h-4 w-48 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"></div></div></div><div class="flex items-center space-x-4"><div class="text-right space-y-1"><div class="h-4 w-12 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"></div><div class="h-3 w-16 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"></div></div><div class="w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 animate-pulse"></div></div></div></div>',1)])))}},ws={class:"rounded-lg border animate-pulse",style:{"background-color":"var(--bg-primary)","border-color":"var(--bg-border)"}},$s={__name:"CommonSkeletonItem",setup(o){return(h,n)=>(t(),s("div",ws,n[0]||(n[0]=[_e('<div class="p-4"><div class="flex items-center justify-between"><div class="flex items-center space-x-3 flex-1"><div class="w-6 h-6 rounded border-2 bg-gray-300 dark:bg-gray-600 animate-pulse"></div><div class="flex-1 min-w-0 space-y-2"><div class="h-4 w-3/4 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"></div><div class="h-3 w-1/2 bg-gray-300 dark:bg-gray-600 rounded animate-pulse"></div></div></div><div class="w-8 h-8 rounded bg-gray-300 dark:bg-gray-600 animate-pulse"></div></div></div>',1)])))}},Cs={class:"w-full",style:{"min-height":"calc(100vh + 200px)"}},js={class:"space-y-6",role:"region","aria-label":"Catégories de la checklist"},Ss=["aria-label"],Ps=["onClick","onKeydown","aria-expanded","aria-controls","aria-label"],Is={class:"flex items-center justify-between relative z-10"},Es={class:"flex items-center space-x-4"},As={class:"flex-shrink-0"},Ts={class:"flex-1 min-w-0"},Vs={class:"flex items-center space-x-3"},Ls={class:"text-right"},Ms=["aria-expanded","aria-label"],Os=["id","aria-label"],Us={class:"p-4 md:p-5 space-y-4"},Ds={__name:"ChecklistSeoChecklist",props:{currentProjectId:{type:String,default:"default"},checklistType:{type:String,default:"web-prelaunch"}},emits:["categories-loaded"],setup(o,{expose:h,emit:n}){const{t:l}=xe(),d=n,{locale:y}=xe(),m=de(),f=o,{getAllCategories:u,getCategoryData:i,setChecklistType:w,waitForData:I}=Ve(f.checklistType),{currentUser:_}=me(),x=g([]),L=g(new Set),T=g(new Set),R=g(new Set),z=g(!0),E=O(()=>x.value.reduce((v,$)=>v+($.items?.length||0),0));O(()=>m.getProjectScores(f.currentProjectId).completedItems);const A=O(()=>m.getProjectScores(f.currentProjectId).percentage),S=O(()=>x.value.length>0&&x.value.every(v=>D(v))),p=O(()=>x.value.length),r=async()=>{try{z.value=!0,await I();const v=u();x.value=v.map($=>{const M=i($),k=l(`categories.${$}.name`),Q=l(`categories.${$}.description`);return{id:$,name:k,description:Q,items:M.items,icon:P($),isLoading:!1}}),await K(),d("categories-loaded",x.value)}catch{x.value=[]}finally{z.value=!1}},a=()=>{window.dataLayer&&window.dataLayer.push({event:"deployment_ready",category:"checklist",action:"deploy_click",label:"all_categories_completed"})},P=v=>({seo:"fluent-emoji:magnifying-glass-tilted-left",accessibilite:"fluent-emoji:wheelchair-symbol",performance:"fluent-emoji:high-voltage","eco-conception":"fluent-emoji:seedling","responsive-ux":"fluent-emoji:mobile-phone",securite:"fluent-emoji:locked",analytics:"fluent-emoji:bar-chart","reseau-chiffrement":"fluent-emoji:shield","authentification-acces":"fluent-emoji:key","protection-attaques":"fluent-emoji:crossed-swords","fichiers-donnees":"fluent-emoji:file-folder","maintenance-surveillance":"fluent-emoji:eye","app-store":"fluent-emoji:red-apple","play-store":"fluent-emoji:robot",technical:"fluent-emoji:gear",legal:"fluent-emoji:balance-scale"})[v]||"fluent-emoji:clipboard",j=async()=>{try{if(!_.value||!f.currentProjectId){L.value=new Set;return}await m.loadProjectChecked(_.value.uid,f.currentProjectId),L.value=m.getCheckedSet(f.currentProjectId)}catch{L.value=new Set}},V=async()=>{try{if(!_.value||!f.currentProjectId)return;m.setCheckedForProject(f.currentProjectId,L.value),await m.saveProjectChecked(_.value.uid,f.currentProjectId),await K()}catch{}},K=async()=>{try{if(!f.currentProjectId)return;const v=[];x.value.forEach($=>{$.items&&v.push(...$.items)}),m.calculateScoresFromItems(f.currentProjectId,v,L.value)}catch(v){console.error("Erreur lors du calcul des scores:",v)}},W=async v=>{try{if(!_.value||!v.detail?.projectId)return;await j(),await r(),await K()}catch($){console.error("Erreur lors du changement de projet:",$)}},ae=async v=>{try{if(!_.value||!f.currentProjectId)return;await m.loadProjectChecked(_.value.uid,f.currentProjectId),L.value=m.getCheckedSet(f.currentProjectId),await K()}catch($){console.error("Erreur lors de la mise à jour des éléments cochés:",$)}},we=v=>R.value.has(v),ye=v=>{R.value.add(v)},$e=v=>{R.value.delete(v)},Ce=v=>{ye(v)},je=v=>{$e(v)},Se=async v=>{const $=L.value.has(v);$?L.value.delete(v):L.value.add(v),await V();const M=x.value.find(k=>k.items?.some(Q=>Q.id===v));if(M){if(!$&&D(M))re(()=>{fe(M.id)}),T.value.delete(M.id);else if($&&!D(M))T.value.add(M.id);else if(!$){const k=M.items.findIndex(Q=>Q.id===v);if(k!==-1&&k<M.items.length-1){const Q=M.items[k+1];we(v)&&Q&&!ce(Q.id)&&(T.value.has(M.id)||T.value.add(M.id),re(()=>{ye(Q.id),window.dispatchEvent(new CustomEvent("open-item-accordion",{detail:{itemId:Q.id}}))}))}}}},ce=v=>L.value.has(v),D=v=>!v.items||v.items.length===0?!1:v.items.every($=>ce($.id)),Pe=g(null);O(()=>{const v=[];for(let $=0;$<12;$++)v.push({id:$,angle:$/12*360,delay:$*40,distance:80+Math.random()*40});return v});const fe=v=>{Pe.value=v},J=v=>T.value.has(v),Ie=v=>v.items?v.items.filter($=>ce($.id)).length:0,ve=v=>{if(T.value.has(v)){T.value.delete(v);const $=x.value.find(M=>M.id===v);$&&$.items&&$.items.forEach(M=>{window.dispatchEvent(new CustomEvent("close-item-accordion",{detail:{itemId:M.id}}))})}else x.value.forEach($=>{$.items&&$.items.forEach(M=>{window.dispatchEvent(new CustomEvent("close-item-accordion",{detail:{itemId:M.id}}))})}),T.value.clear(),T.value.add(v),D(x.value.find($=>$.id===v))&&fe(v)},pe=v=>{x.value.forEach($=>{$.items&&$.items.forEach(M=>{window.dispatchEvent(new CustomEvent("close-item-accordion",{detail:{itemId:M.id}}))})}),T.value.clear(),T.value.add(v)};return oe(A,v=>{window.dispatchEvent(new CustomEvent("progress-updated",{detail:{percentage:Math.round(v)}}))},{immediate:!0}),oe(y,async()=>{await r()},{immediate:!1}),oe(()=>f.checklistType,async v=>{w(v),await r()},{immediate:!1}),oe(()=>f.currentProjectId,async(v,$)=>{if(v&&v!==$)try{await j(),await K()}catch(M){console.error("Erreur lors du changement de projet (watcher):",M)}},{immediate:!1}),ne(()=>{re().then(async()=>{await j(),await r(),x.value.length>0&&T.value.add(x.value[0].id),window.addEventListener("open-category",v=>{v.detail&&v.detail.categoryId&&pe(v.detail.categoryId)}),window.addEventListener("project-checklist-changed",W),window.addEventListener("checked-items-updated",ae)})}),ie(()=>{window.removeEventListener("open-category",v=>{v.detail&&v.detail.categoryId&&pe(v.detail.categoryId)}),window.removeEventListener("project-checklist-changed",W),window.removeEventListener("checked-items-updated",ae)}),h({openCategory:pe,resetProgress:async()=>{L.value=new Set,_.value&&f.currentProjectId&&(m.setCheckedForProject(f.currentProjectId,new Set),m.resetProjectScores(f.currentProjectId),await m.saveProjectChecked(_.value.uid,f.currentProjectId)),window.dispatchEvent(new CustomEvent("progress-updated",{detail:{percentage:0}}))}}),(v,$)=>{const M=X;return t(),s("div",Cs,[S.value&&!z.value?(t(),Z(gs,{key:0,"total-items":E.value,"total-categories":p.value,onDeployClick:a},null,8,["total-items","total-categories"])):b("",!0),e("div",js,[z.value?(t(),s(q,{key:0},N(3,k=>C(_s,{key:`skeleton-category-${k}`})),64)):(t(!0),s(q,{key:1},N(x.value,(k,Q)=>(t(),s("div",{key:k.id,class:"card",role:"region","aria-label":`Catégorie ${k.name}`},[e("div",{class:U(["p-4 md:p-5 cursor-pointer transition-all duration-300 hover:bg-opacity-80 relative overflow-hidden",{"bg-gradient-to-br from-green-400 to-green-600 shadow-lg shadow-green-500/30 rounded-t-xl":D(k)&&J(k.id),"bg-gradient-to-br from-green-400 to-green-600 shadow-lg shadow-green-500/30 rounded-xl":D(k)&&!J(k.id),"hover:bg-opacity-80 rounded-t-xl":!D(k)&&J(k.id),"hover:bg-opacity-80 rounded-xl":!D(k)&&!J(k.id)}]),onClick:ee=>ve(k.id),onKeydown:[se(ee=>ve(k.id),["enter"]),se(Y(ee=>ve(k.id),["prevent"]),["space"])],role:"button","aria-expanded":J(k.id),"aria-controls":`category-${k.id}`,"aria-label":`${J(k.id)?te(l)("common.closeCategory",{name:k.name}):te(l)("common.openCategory",{name:k.name})}`,tabindex:"0"},[e("div",Is,[e("div",Es,[e("div",As,[C(M,{name:P(k.id),class:U(["w-8 h-8 transition-colors duration-200",{"text-white drop-shadow-sm":D(k)}]),style:B({color:D(k)?"white":"var(--accent-primary)"}),"aria-hidden":"true"},null,8,["name","class","style"])]),e("div",Ts,[e("h2",{class:U(["text-xl font-semibold leading-tight transition-colors duration-200 mb-1",{"text-white":D(k)}]),style:B({color:D(k)?"white":"var(--text-primary)"})},c(k.name),7),e("p",{class:U(["text-sm transition-colors duration-200",{"text-green-100":D(k)}]),style:B({color:D(k)?"#dcfce7":"var(--text-secondary)"})},c(k.description),7)])]),e("div",Vs,[e("div",Ls,[e("div",{class:U(["text-sm font-medium transition-colors duration-200",{"text-white":D(k)}]),style:B({color:D(k)?"white":"var(--text-primary)"})},c(Ie(k))+" / "+c(k.items?.length||0),7),e("div",{class:U(["text-xs transition-colors duration-200",{"text-green-100":D(k)}]),style:B({color:D(k)?"#dcfce7":"var(--text-muted)"})},c(te(l)("common.completed")),7)]),e("button",{class:U(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center transition-all duration-200 hover:bg-opacity-80",{"rotate-180":J(k.id)&&!D(k),"bg-white/20 hover:bg-white/30":D(k)}]),"aria-expanded":J(k.id),"aria-label":`${J(k.id)?te(l)("common.closeCategory",{name:k.name}):te(l)("common.openCategory",{name:k.name})}`,"aria-hidden":"true"},[D(k)?(t(),Z(M,{key:0,name:"heroicons:check-circle",class:"w-6 h-6 transition-colors duration-200 text-white","aria-hidden":"true"})):(t(),Z(M,{key:1,name:"heroicons:chevron-down",class:"w-5 h-5 transition-colors duration-200",style:{color:"var(--text-muted)"},"aria-hidden":"true"}))],10,Ms)])])],42,Ps),e("div",{id:`category-${k.id}`,class:U(["border-t transition-all duration-500 ease-out overflow-hidden",{"max-h-0 opacity-0 transform -translate-y-2":!J(k.id),"max-h-[10000px] opacity-100 transform translate-y-0":J(k.id)}]),style:{"border-color":"var(--bg-border)","background-color":"var(--bg-primary)"},role:"region","aria-label":`Contenu de la catégorie ${k.name}`},[e("div",Us,[k.isLoading?(t(),s(q,{key:0},N(3,ee=>C($s,{key:`skeleton-item-${ee}`})),64)):(t(!0),s(q,{key:1},N(k.items,ee=>(t(),Z(ys,{key:ee.id,item:ee,"is-item-checked":ce(ee.id),onToggleItem:Se,onAccordionOpened:Ce,onAccordionClosed:je},null,8,["item","is-item-checked"]))),128))])],10,Os)],8,Ss))),128))])])}}},qs=ue(Ds,[["__scopeId","data-v-64cacf93"]]),Rs={class:"flex gap-2"},zs={class:"flex-1"},Ns={key:0,class:"text-sm text-red-500 mt-1"},Fs=["open"],Bs={class:"flex items-center gap-2"},Hs={class:"px-4 pb-4"},Xs={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ks={class:"relative"},Zs=["type"],Ws=["title","aria-label"],Js={class:"flex items-center gap-3"},Qs=["disabled"],Gs={key:0},Ys={key:1,class:"flex items-center gap-2"},eo={key:2,class:"flex items-center gap-2"},to={key:3,class:"inline-flex items-center gap-2"},so={class:"animate-spin h-4 w-4",viewBox:"0 0 24 24",style:{color:"white"}},oo={key:0,class:"text-sm",style:{color:"#fca5a5"}},lo={key:0,class:"mt-8 space-y-6"},ao={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ro={class:"w-16 h-16 rounded-full grid place-items-center",style:{"background-color":"var(--bg-surface)",border:"1px solid var(--bg-border)"}},no={class:"text-lg font-bold",style:{color:"var(--text-primary)"}},io={class:"text-sm font-semibold",style:{color:"var(--text-primary)"}},co={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uo={class:"p-4 rounded-xl border",style:{"border-color":"var(--bg-border)"}},mo={class:"space-y-2 text-sm"},vo={class:"flex items-center gap-2"},po={class:"flex items-center gap-2"},ho={class:"flex items-center gap-2"},yo={class:"flex items-center gap-2"},fo={class:"p-4 rounded-xl border",style:{"border-color":"var(--bg-border)"}},xo={class:"space-y-2 text-sm",style:{color:"var(--text-secondary)"}},bo=le({__name:"LighthousePanel",emits:["items-autochecked"],setup(o,{expose:h,emit:n}){const l=g(""),d=g(""),y=g(""),m=g(!1),f=g("mobile"),u=g(!1),i=g(""),w=g(null),I=n,_=g(!1),x=g(!1),L=[{key:"performance",label:"Performance"},{key:"seo",label:"SEO"},{key:"best-practices",label:"Bonnes pratiques"},{key:"accessibility",label:"Accessibilité"}],T=r=>r!=null?Math.round(r*100):0,R=r=>({background:`conic-gradient(var(--accent-primary) ${r*3.6}deg, var(--bg-border) 0)`}),z=r=>{const a=w.value?.audits?.[r]?.numericValue;return a!=null?`${Math.round(a)} ms`:"—"},E=r=>{const a=w.value?.audits?.[r];return a?a.score===1?"OK":"À améliorer":"—"},A=async()=>{if(!l.value||!x.value){i.value="Veuillez entrer une URL valide";return}i.value="",w.value=null,u.value=!0;try{const r={url:l.value,formFactor:f.value};d.value&&y.value&&(r.basicUser=d.value,r.basicPass=y.value);const a=await $fetch("/.netlify/functions/lh",{method:"POST",body:r});w.value=a;try{const{collectChecklistItemIdsFromLhr:P}=await Te(async()=>{const{collectChecklistItemIdsFromLhr:V}=await import("./Di7wLZl5.js");return{collectChecklistItemIdsFromLhr:V}},[],import.meta.url),j=P(w.value);j.length>0&&I("items-autochecked",j)}catch{}}catch(r){i.value=r?.data?.statusMessage||r?.message||"Erreur inattendue"}finally{u.value=!1}},S=()=>{if(!l.value){x.value=!1;return}try{const r=new URL(l.value);if(!["http:","https:"].includes(r.protocol)){x.value=!1;return}if(!r.hostname||r.hostname.length<3){x.value=!1;return}if(!r.hostname.includes(".")){x.value=!1;return}x.value=!0}catch{x.value=!1}};return h({reset:()=>{l.value="",d.value="",y.value="",m.value=!1,f.value="mobile",u.value=!1,i.value="",w.value=null,_.value=!1,x.value=!1}}),(r,a)=>{const P=X;return t(),s("div",null,[e("form",{onSubmit:Y(A,["prevent"]),class:"space-y-4",autocomplete:"off"},[e("div",null,[a[7]||(a[7]=e("label",{class:"block text-sm mb-1",style:{color:"var(--text-secondary)"}},"URL",-1)),e("div",Rs,[e("div",zs,[F(e("input",{"onUpdate:modelValue":a[0]||(a[0]=j=>l.value=j),type:"url",required:"",placeholder:"https://preprod.example.com",class:U(["input w-full",{"border-red-500":l.value&&!x.value}]),autocomplete:"off",spellcheck:"false",autocapitalize:"none",onInput:S},null,34),[[H,l.value]]),l.value&&!x.value?(t(),s("div",Ns," Veuillez entrer une URL valide (ex: https://example.com) ")):b("",!0)]),F(e("select",{"onUpdate:modelValue":a[1]||(a[1]=j=>f.value=j),class:"input w-36"},a[6]||(a[6]=[e("option",{value:"mobile"},"Mobile",-1),e("option",{value:"desktop"},"Desktop",-1)]),512),[[Ee,f.value]])])]),e("details",{class:"rounded-xl border",style:{"border-color":"var(--bg-border)"},open:_.value},[e("summary",{class:"cursor-pointer px-4 py-3 text-sm flex items-center justify-between",onClick:a[2]||(a[2]=Y(j=>_.value=!_.value,["prevent"])),style:{color:"var(--text-secondary)"}},[e("span",Bs,[C(P,{name:"heroicons:adjustments-vertical",class:"w-4 h-4"}),a[8]||(a[8]=G(" Options avancées",-1))]),C(P,{name:_.value?"heroicons:chevron-up":"heroicons:chevron-down",class:"w-4 h-4"},null,8,["name"])]),e("div",Hs,[e("div",Xs,[e("div",null,[a[9]||(a[9]=e("label",{class:"block text-sm mb-1",style:{color:"var(--text-secondary)"}},"HTTP Basic – user",-1)),F(e("input",{"onUpdate:modelValue":a[3]||(a[3]=j=>d.value=j),type:"text",placeholder:"user",class:"input w-full",autocomplete:"off",spellcheck:"false",autocapitalize:"none"},null,512),[[H,d.value]])]),e("div",null,[a[10]||(a[10]=e("label",{class:"block text-sm mb-1",style:{color:"var(--text-secondary)"}},"HTTP Basic – password",-1)),e("div",Ks,[F(e("input",{"onUpdate:modelValue":a[4]||(a[4]=j=>y.value=j),type:m.value?"text":"password",placeholder:"mot de passe",class:"input w-full pr-12",autocomplete:"new-password"},null,8,Zs),[[Ae,y.value]]),e("button",{type:"button",onClick:a[5]||(a[5]=j=>m.value=!m.value),class:"absolute inset-y-0 right-2 my-auto w-9 h-9 rounded-lg flex items-center justify-center",title:m.value?"Cacher":"Afficher","aria-label":m.value?"Cacher":"Afficher",style:{"background-color":"transparent"}},[C(P,{name:m.value?"heroicons:eye-slash":"heroicons:eye",class:"w-5 h-5",style:{color:"var(--text-primary)"}},null,8,["name"])],8,Ws)])])])])],8,Fs),e("div",Js,[e("button",{disabled:u.value||!l.value||!x.value,class:U(["btn btn-primary",{"opacity-50 cursor-not-allowed":!l.value||!x.value}])},[!u.value&&l.value&&x.value?(t(),s("span",Gs,"Lancer l'audit")):!u.value&&!l.value?(t(),s("span",Ys,[C(P,{name:"heroicons:information-circle",class:"w-4 h-4"}),a[11]||(a[11]=G(" Entrez l'URL du site web ",-1))])):!u.value&&!x.value?(t(),s("span",eo,[C(P,{name:"heroicons:information-circle",class:"w-4 h-4"}),a[12]||(a[12]=G(" URL invalide ",-1))])):(t(),s("span",to,[(t(),s("svg",so,a[13]||(a[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))),a[14]||(a[14]=G(" Audit en cours… ",-1))]))],10,Qs),i.value?(t(),s("span",oo,c(i.value),1)):b("",!0)])],32),w.value?(t(),s("div",lo,[e("div",ao,[(t(),s(q,null,N(L,j=>e("div",{key:j.key,class:"p-4 rounded-xl border text-center",style:{"border-color":"var(--bg-border)"}},[e("div",{class:"mx-auto mb-3 w-20 h-20 rounded-full grid place-items-center",style:B(R(T(w.value.categories[j.key]?.score)))},[e("div",ro,[e("span",no,c(T(w.value.categories[j.key]?.score)),1)])],4),e("div",io,c(j.label),1)])),64))]),e("div",co,[e("div",uo,[a[19]||(a[19]=e("h3",{class:"font-semibold mb-3",style:{color:"var(--text-primary)"}},"Indicateurs clés",-1)),e("ul",mo,[e("li",vo,[C(P,{name:"heroicons:clock",class:"w-4 h-4",style:{color:"var(--accent-primary)"}}),a[15]||(a[15]=e("span",{class:"flex-1"},"LCP",-1)),e("strong",null,c(z("largest-contentful-paint")),1)]),e("li",po,[C(P,{name:"heroicons:cursor-arrow-rays",class:"w-4 h-4",style:{color:"var(--accent-primary)"}}),a[16]||(a[16]=e("span",{class:"flex-1"},"INP",-1)),e("strong",null,c(z("experimental-interaction-to-next-paint")),1)]),e("li",ho,[C(P,{name:"heroicons:arrows-right-left",class:"w-4 h-4",style:{color:"var(--accent-primary)"}}),a[17]||(a[17]=e("span",{class:"flex-1"},"CLS",-1)),e("strong",null,c(w.value?.audits?.["cumulative-layout-shift"]?.displayValue??"—"),1)]),e("li",yo,[C(P,{name:"heroicons:signal",class:"w-4 h-4",style:{color:"var(--accent-primary)"}}),a[18]||(a[18]=e("span",{class:"flex-1"},"TTFB",-1)),e("strong",null,c(z("server-response-time")),1)])])]),e("div",fo,[a[23]||(a[23]=e("h3",{class:"font-semibold mb-3",style:{color:"var(--text-primary)"}},"Détails SEO",-1)),e("ul",xo,[e("li",null,[a[20]||(a[20]=G("Titres & meta: ",-1)),e("strong",null,c(E("meta-description")),1)]),e("li",null,[a[21]||(a[21]=G("Liens internes: ",-1)),e("strong",null,c(E("is-crawlable")),1)]),e("li",null,[a[22]||(a[22]=G("Best practices: ",-1)),e("strong",null,c(E("image-alt")),1)])])])]),a[24]||(a[24]=e("p",{class:"text-xs",style:{color:"var(--text-muted)"}},"Astuce: lancez l’audit sur mobile et desktop pour comparer.",-1))])):b("",!0)])}}}),go=Object.assign(bo,{__name:"DashboardLighthousePanel"}),ko={class:"card",style:{"background-color":"var(--bg-surface)",border:"1px solid var(--bg-border)"}},_o=["disabled","aria-expanded"],wo={class:"flex items-center gap-3"},$o={class:"w-8 h-8 rounded-lg flex items-center justify-center",style:{"background-color":"var(--bg-primary)",border:"1px solid var(--bg-border)"}},Co={class:"text-left"},jo={class:"text-xs",style:{color:"var(--text-secondary)"}},So={class:"p-4"},Po=le({__name:"LighthouseAccordion",props:{defaultExpanded:{type:Boolean},projectType:{}},setup(o,{expose:h}){const n=o,{currentUser:l}=me(),d=de(),y=g(n.defaultExpanded??!0),m=g();oe(()=>n.projectType,I=>{I==="appstore-preflight"||I==="security-checker"?y.value=!1:n.defaultExpanded&&(y.value=!0)},{immediate:!0});const f=()=>{y.value=!1},u=async()=>{y.value=!1,await re(),m.value&&m.value.reset()},i=()=>{n.projectType==="appstore-preflight"||n.projectType==="security-checker"||(y.value=!y.value)},w=async I=>{try{const _=d.currentProjectId;if(!_||!l?.value)return;const x=d.getCheckedSet(_);I.forEach(L=>x.add(L)),d.setCheckedForProject(_,x),await d.saveProjectChecked(l.value.uid,_),window.dispatchEvent(new CustomEvent("checked-items-updated",{detail:{projectId:_,itemIds:I}}))}catch{}};return h({close:f,reset:u,expanded:O(()=>y.value)}),(I,_)=>{const x=X;return t(),s("div",ko,[e("button",{onClick:i,disabled:I.projectType==="appstore-preflight",class:U(["w-full p-4 flex items-center justify-between rounded-xl transition-all duration-300",[I.projectType==="appstore-preflight"?"opacity-50 cursor-not-allowed":"hover:bg-opacity-80"]]),"aria-expanded":y.value,"aria-controls":"lh-content",style:{"background-color":"var(--bg-surface)"}},[e("div",wo,[e("div",$o,[C(x,{name:"heroicons:bolt",class:"w-4 h-4",style:{color:"var(--accent-primary)"}})]),e("div",Co,[_[0]||(_[0]=e("div",{class:"text-base font-semibold",style:{color:"var(--text-primary)"}},"Audit Lighthouse",-1)),e("div",jo,c(I.projectType==="appstore-preflight"?"Non disponible pour les projets mobiles":I.projectType==="security-checker"?"Non disponible pour les projets de sécurité":"Analyse rapide d'une URL (mobile/desktop)"),1)])]),C(x,{name:y.value?"heroicons:chevron-up":"heroicons:chevron-down",class:"w-5 h-5",style:{color:"var(--text-muted)"}},null,8,["name"])],10,_o),e("div",{id:"lh-content",class:U(["border-t transition-all duration-500 ease-out overflow-hidden",{"max-h-0 opacity-0 -translate-y-1":!y.value,"max-h-[5000px] opacity-100 translate-y-0":y.value}]),style:{"border-color":"var(--bg-border)","background-color":"var(--bg-primary)"}},[e("div",So,[C(go,{ref_key:"lighthousePanel",ref:m,onItemsAutochecked:w},null,512)])],2)])}}}),ge=Object.assign(Po,{__name:"DashboardLighthouseAccordion"}),Io={"content-security-policy":["content-security-policy"],"x-frame-options":["security-headers"],"x-content-type-options":["security-headers"],"x-xss-protection":["security-headers"],"strict-transport-security":["hsts-enabled"],"referrer-policy":["security-headers"],"permissions-policy":["security-headers"],"cross-origin-embedder-policy":["security-headers"],"cross-origin-opener-policy":["security-headers"],"cross-origin-resource-policy":["security-headers"]},Eo={xss:["xss-protection"],csrf:["csrf-protection"],injection:["sql-injection-protection"],"error-handling":["secure-error-handling"],"input-validation":["input-validation"],"file-upload":["secure-file-upload"],authentication:["secure-authentication"],"session-management":["secure-session-management"]};function Ao(o){const h=[];return Object.entries(o).forEach(([n,l])=>{if(l!==null){const d=Io[n]||[];h.push(...d)}}),o["content-security-policy"]&&o["x-frame-options"]&&h.push("basic-security-headers"),o["strict-transport-security"]&&h.push("https-enforcement"),[...new Set(h)]}function To(o){const h=[];return!o||!o.vulnerabilities?h:(o.vulnerabilities.forEach(n=>{const l=n.type||n.name||"",d=Eo[l.toLowerCase()]||[];h.push(...d)}),[...new Set(h)])}const Vo=["open"],Lo={class:"flex items-center gap-3"},Mo={key:0,class:"flex items-center gap-2"},Oo={class:"text-xs font-bold text-white"},Uo={class:"flex items-center gap-2"},Do={key:0,class:"text-xs",style:{color:"var(--text-secondary)"}},qo={class:"px-4 pb-4"},Ro={class:"space-y-4"},zo={class:"flex items-center gap-3"},No=["disabled"],Fo={key:0},Bo={key:1,class:"inline-flex items-center gap-2"},Ho={key:0,class:"text-sm",style:{color:"#fca5a5"}},Xo={key:0,class:"space-y-4"},Ko={class:"p-3 rounded-lg border",style:{"background-color":"var(--bg-surface)","border-color":"var(--bg-border)"}},Zo={class:"flex items-center justify-between mb-2"},Wo={class:"text-sm font-bold text-white"},Jo={class:"text-xs",style:{color:"var(--text-secondary)"}},Qo={class:"space-y-3"},Go={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Yo={class:"flex items-center justify-between mb-1"},el={class:"text-xs font-medium",style:{color:"var(--text-primary)"}},tl={class:"flex items-center gap-1"},sl={class:"text-xs",style:{color:"var(--text-secondary)"}},ol={key:0,class:"text-xs mt-1 font-mono",style:{color:"var(--text-muted)"}},ll={key:0,class:"p-3 rounded-lg",style:{"background-color":"var(--bg-surface)"}},al={class:"space-y-1"},rl={style:{color:"var(--text-secondary)"}},nl=le({__name:"HeadersSecurityPanel",props:{url:{},isValidUrl:{type:Boolean}},emits:["items-autochecked"],setup(o,{expose:h,emit:n}){const l=o,d=n,y=g(!1),m=g(!1),f=g(""),u=g(null),i=O(()=>{if(u.value)return Math.round(u.value.score*100)}),w=O(()=>!!u.value),I=O(()=>u.value?.headers?[{name:"Content-Security-Policy",status:u.value.headers["content-security-policy"]?"present":"missing",description:"Protection contre les attaques XSS et injection",value:u.value.headers["content-security-policy"]},{name:"X-Frame-Options",status:u.value.headers["x-frame-options"]?"present":"missing",description:"Protection contre le clickjacking",value:u.value.headers["x-frame-options"]},{name:"X-Content-Type-Options",status:u.value.headers["x-content-type-options"]?"present":"missing",description:"Prévention du MIME sniffing",value:u.value.headers["x-content-type-options"]},{name:"X-XSS-Protection",status:u.value.headers["x-xss-protection"]?"present":"missing",description:"Protection XSS du navigateur",value:u.value.headers["x-xss-protection"]},{name:"Strict-Transport-Security",status:u.value.headers["strict-transport-security"]?"present":"missing",description:"Forcer HTTPS",value:u.value.headers["strict-transport-security"]},{name:"Referrer-Policy",status:u.value.headers["referrer-policy"]?"present":"missing",description:"Contrôle des informations de référence",value:u.value.headers["referrer-policy"]}]:[]),_=O(()=>{const E=[];return u.value?.headers["content-security-policy"]||E.push("Ajouter un Content-Security-Policy pour protéger contre les attaques XSS"),u.value?.headers["x-frame-options"]||E.push("Configurer X-Frame-Options pour prévenir le clickjacking"),u.value?.headers["strict-transport-security"]||E.push("Implémenter HSTS pour forcer l'utilisation de HTTPS"),E}),x=async()=>{if(!(!l.url||!l.isValidUrl)){m.value=!0,f.value="",u.value=null;try{const E=await $fetch("/api/security-headers",{method:"POST",body:{url:l.url}});if(E.success){const A=E.data,S=A.score/100;u.value={score:S,headers:A.headers,analysis:A.analysis,recommendations:A.recommendations};const p=L();p.length>0&&d("items-autochecked",p)}else throw new Error("Erreur lors du scan des headers de sécurité")}catch(E){f.value=E?.message||"Erreur lors du scan des headers de sécurité"}finally{m.value=!1}}},L=()=>u.value?Ao(u.value.headers||{}):[],T=E=>E>=90?"Excellent - Tous les headers de sécurité sont configurés":E>=70?"Bon - La plupart des headers de sécurité sont présents":E>=50?"Moyen - Certains headers de sécurité manquent":"Faible - Beaucoup de headers de sécurité sont manquants",R=E=>({background:`conic-gradient(var(--accent-primary) ${E*3.6}deg, var(--bg-border) 0)`});return h({runScan:x,reset:()=>{m.value=!1,f.value="",u.value=null,y.value=!1},loading:m,score:i,hasResults:w}),(E,A)=>{const S=X;return t(),s("details",{class:"rounded-xl border",style:{"border-color":"var(--bg-border)"},open:y.value},[e("summary",{class:"cursor-pointer px-4 py-3 text-sm flex items-center justify-between hover:bg-opacity-50",style:{"background-color":"var(--bg-surface)"},onClick:A[0]||(A[0]=Y(p=>y.value=!y.value,["prevent"]))},[e("div",Lo,[C(S,{name:"heroicons:shield-check",class:"w-5 h-5",style:{color:"var(--accent-primary)"}}),A[1]||(A[1]=e("span",{class:"font-semibold",style:{color:"var(--text-primary)"}},"Headers de Sécurité",-1)),i.value!==void 0?(t(),s("div",Mo,[e("div",{class:"w-6 h-6 rounded-full grid place-items-center",style:B(R(i.value))},[e("span",Oo,c(i.value),1)],4)])):b("",!0)]),e("div",Uo,[m.value?(t(),s("span",Do,"Scan en cours...")):b("",!0),C(S,{name:y.value?"heroicons:chevron-up":"heroicons:chevron-down",class:"w-4 h-4",style:{color:"var(--text-secondary)"}},null,8,["name"])])]),e("div",qo,[e("div",Ro,[A[6]||(A[6]=e("p",{class:"text-sm",style:{color:"var(--text-secondary)"}}," Analyse des en-têtes HTTP de sécurité pour détecter les vulnérabilités et bonnes pratiques. ",-1)),e("div",zo,[e("button",{onClick:x,disabled:m.value||!E.isValidUrl||!E.url,class:U(["btn btn-primary btn-sm",{"opacity-50 cursor-not-allowed":!E.isValidUrl||!E.url}])},[m.value?(t(),s("span",Bo,A[2]||(A[2]=[e("svg",{class:"animate-spin h-4 w-4",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})],-1),G(" Scan... ",-1)]))):(t(),s("span",Fo,"Scanner les headers"))],10,No),f.value?(t(),s("span",Ho,c(f.value),1)):b("",!0)]),u.value?(t(),s("div",Xo,[e("div",Ko,[e("div",Zo,[A[3]||(A[3]=e("span",{class:"text-sm font-semibold",style:{color:"var(--text-primary)"}},"Score global",-1)),e("div",{class:"w-12 h-12 rounded-full grid place-items-center",style:B(R(i.value))},[e("span",Wo,c(i.value),1)],4)]),e("div",Jo,c(T(i.value)),1)]),e("div",Qo,[A[4]||(A[4]=e("h4",{class:"text-sm font-semibold",style:{color:"var(--text-primary)"}},"Détails des headers",-1)),e("div",Go,[(t(!0),s(q,null,N(I.value,p=>(t(),s("div",{key:p.name,class:"p-3 rounded-lg border",style:B({borderColor:p.status==="present"?"var(--accent-primary)":"var(--bg-border)"})},[e("div",Yo,[e("span",el,c(p.name),1),e("div",tl,[C(S,{name:p.status==="present"?"heroicons:check-circle":"heroicons:x-circle",class:"w-4 h-4",style:B({color:p.status==="present"?"var(--accent-primary)":"#fca5a5"})},null,8,["name","style"])])]),e("div",sl,c(p.description),1),p.value?(t(),s("div",ol,c(p.value),1)):b("",!0)],4))),128))])]),_.value.length>0?(t(),s("div",ll,[A[5]||(A[5]=e("h4",{class:"text-sm font-semibold mb-2",style:{color:"var(--text-primary)"}},"Recommandations",-1)),e("ul",al,[(t(!0),s(q,null,N(_.value,p=>(t(),s("li",{key:p,class:"text-xs flex items-start gap-2"},[C(S,{name:"heroicons:information-circle",class:"w-3 h-3 mt-0.5 flex-shrink-0",style:{color:"var(--accent-primary)"}}),e("span",rl,c(p),1)]))),128))])])):b("",!0)])):b("",!0)])])],8,Vo)}}}),il=Object.assign(nl,{__name:"DashboardHeadersSecurityPanel"}),cl=["open"],dl={class:"flex items-center gap-3"},ul={key:0,class:"flex items-center gap-2"},ml={class:"text-xs font-bold text-white"},vl={class:"flex items-center gap-2"},pl={key:0,class:"text-xs",style:{color:"var(--text-secondary)"}},hl={class:"px-4 pb-4"},yl={class:"space-y-4"},fl={class:"flex items-center gap-3"},xl=["disabled"],bl={key:0},gl={key:1,class:"inline-flex items-center gap-2"},kl={key:0,class:"text-sm",style:{color:"#fca5a5"}},_l={key:0,class:"space-y-4 mt-6"},wl={class:"flex items-center justify-between mb-3"},$l={class:"text-sm",style:{color:"var(--text-secondary)"}},Cl={class:"text-lg font-bold text-white"},jl={class:"flex items-center gap-2 text-xs",style:{color:"var(--text-secondary)"}},Sl={class:"p-4 rounded-lg border",style:{"border-color":"var(--bg-border)"}},Pl={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},Il={class:"text-center p-3 rounded-lg",style:{"background-color":"#ef4444",color:"white"}},El={class:"text-lg font-bold"},Al={class:"text-center p-3 rounded-lg",style:{"background-color":"#f97316",color:"white"}},Tl={class:"text-lg font-bold"},Vl={class:"text-center p-3 rounded-lg",style:{"background-color":"#f59e0b",color:"white"}},Ll={class:"text-lg font-bold"},Ml={class:"text-center p-3 rounded-lg",style:{"background-color":"#3b82f6",color:"white"}},Ol={class:"text-lg font-bold"},Ul={key:0,class:"p-4 rounded-lg border",style:{"border-color":"var(--bg-border)"}},Dl={class:"space-y-3"},ql={class:"flex items-start justify-between"},Rl={class:"flex-1"},zl={class:"flex items-center gap-2 mb-1"},Nl={class:"text-sm font-medium",style:{color:"var(--text-primary)"}},Fl={class:"text-xs",style:{color:"var(--text-secondary)"}},Bl={key:1,class:"p-4 rounded-lg border",style:{"border-color":"var(--bg-border)"}},Hl={class:"space-y-2"},Xl=le({__name:"VulnerabilityPanel",props:{url:{},isValidUrl:{type:Boolean},isOpen:{type:Boolean}},emits:["update:isOpen","items-autochecked"],setup(o,{expose:h,emit:n}){const l=o,d=n,y=g(!1),m=g(null),f=g(""),u=O(()=>l.url),i=O(()=>l.isValidUrl),w=O(()=>m.value?.score||0),I=O(()=>!!m.value),_=O({get:()=>l.isOpen,set:j=>d("update:isOpen",j)}),x=O(()=>m.value?.vulnerabilities?m.value.vulnerabilities.slice(0,3):[]),L=O(()=>m.value?.recommendations?m.value.recommendations.slice(0,3):[]),T=async()=>{if(!(!i.value||!u.value)){y.value=!0;try{const j=await $fetch("/api/security-vulnerabilities",{method:"POST",body:{url:u.value}});if(j?.success){const V=j.data;m.value=V;try{const K=To(m.value);K.length&&d("items-autochecked",K)}catch{}return}m.value=null}catch{m.value=null}finally{y.value=!1}}},R=async()=>{await T()},z=()=>{y.value=!1,m.value=null},E=j=>({background:`conic-gradient(${S(j)} ${j*3.6}deg, var(--bg-border) ${j*3.6}deg)`}),A=j=>j>=90?"Excellent - Aucune vulnérabilité critique détectée":j>=70?"Bon - Quelques vulnérabilités mineures détectées":j>=50?"Moyen - Vulnérabilités modérées nécessitent attention":"Faible - Vulnérabilités importantes nécessitent action immédiate",S=j=>j>=90?"#10b981":j>=70?"#3b82f6":j>=50?"#f59e0b":"#ef4444",p=()=>{if(!m.value)return"heroicons:question-mark-circle";switch(m.value.source){case"owasp-zap":return"heroicons:shield-check";case"manual-tests":return"heroicons:server";default:return"heroicons:question-mark-circle"}},r=()=>{if(!m.value)return"Inconnu";switch(m.value.source){case"owasp-zap":return"OWASP ZAP (scanner professionnel)";case"manual-tests":return"Tests manuels (vérifications automatisées)";default:return"Source inconnue"}},a=j=>m.value?.summary&&m.value.summary[j]||0,P=j=>{switch(j){case"critical":return"#ef4444";case"high":return"#f97316";case"medium":return"#f59e0b";case"low":return"#3b82f6";default:return"#6b7280"}};return h({runScan:R,reset:z,loading:y,score:w,hasResults:I}),(j,V)=>{const K=X;return t(),s("details",{class:"rounded-xl border",style:{"border-color":"var(--bg-border)"},open:_.value},[e("summary",{class:"cursor-pointer px-4 py-3 text-sm flex items-center justify-between hover:bg-opacity-50",style:{"background-color":"var(--bg-surface)"},onClick:V[0]||(V[0]=Y(W=>_.value=!_.value,["prevent"]))},[e("div",dl,[C(K,{name:"heroicons:shield-check",class:"w-5 h-5",style:{color:"var(--accent-primary)"}}),V[1]||(V[1]=e("span",{class:"font-semibold",style:{color:"var(--text-primary)"}},"Vulnerability Scanner",-1)),w.value!==void 0?(t(),s("div",ul,[e("div",{class:"w-6 h-6 rounded-full grid place-items-center",style:B(E(w.value))},[e("span",ml,c(w.value),1)],4)])):b("",!0)]),e("div",vl,[y.value?(t(),s("span",pl,"Scan en cours...")):b("",!0),C(K,{name:_.value?"heroicons:chevron-up":"heroicons:chevron-down",class:"w-4 h-4",style:{color:"var(--text-secondary)"}},null,8,["name"])])]),e("div",hl,[e("div",yl,[V[3]||(V[3]=e("p",{class:"text-sm",style:{color:"var(--text-secondary)"}},"Analyse des vulnérabilités de sécurité avec OWASP ZAP et tests automatisés.",-1)),e("div",fl,[e("button",{onClick:R,disabled:y.value||!i.value||!u.value,class:U(["btn btn-primary btn-sm",{"opacity-50 cursor-not-allowed":y.value||!i.value||!u.value}])},[y.value?(t(),s("span",gl,V[2]||(V[2]=[e("svg",{class:"animate-spin h-4 w-4",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a 8 8 0 0 1 8-8v4a4 4 0 0 0-4 4H4z"})],-1),G(" Scan... ",-1)]))):(t(),s("span",bl,"Scanner les vulnérabilités"))],10,xl),f.value?(t(),s("span",kl,c(f.value),1)):b("",!0)])]),m.value?(t(),s("div",_l,[e("div",{class:"p-4 rounded-lg border-2",style:B({borderColor:S(w.value)})},[e("div",wl,[e("div",null,[V[4]||(V[4]=e("h3",{class:"text-lg font-bold",style:{color:"var(--text-primary)"}},"Score de sécurité",-1)),e("p",$l,c(A(w.value)),1)]),e("div",{class:"w-16 h-16 rounded-full grid place-items-center",style:B({backgroundColor:S(w.value)})},[e("span",Cl,c(w.value),1)],4)]),e("div",jl,[C(K,{name:p(),class:"w-3 h-3"},null,8,["name"]),e("span",null,"Source : "+c(r()),1)])],4),e("div",Sl,[V[9]||(V[9]=e("h4",{class:"text-sm font-semibold mb-3",style:{color:"var(--text-primary)"}},"Résumé des vulnérabilités",-1)),e("div",Pl,[e("div",Il,[e("div",El,c(a("critical")),1),V[5]||(V[5]=e("div",{class:"text-xs"},"Critiques",-1))]),e("div",Al,[e("div",Tl,c(a("high")),1),V[6]||(V[6]=e("div",{class:"text-xs"},"Élevées",-1))]),e("div",Vl,[e("div",Ll,c(a("medium")),1),V[7]||(V[7]=e("div",{class:"text-xs"},"Moyennes",-1))]),e("div",Ml,[e("div",Ol,c(a("low")),1),V[8]||(V[8]=e("div",{class:"text-xs"},"Faibles",-1))])])]),x.value.length>0?(t(),s("div",Ul,[V[10]||(V[10]=e("h4",{class:"text-sm font-semibold mb-3",style:{color:"var(--text-primary)"}},"Vulnérabilités principales",-1)),e("div",Dl,[(t(!0),s(q,null,N(x.value,(W,ae)=>(t(),s("div",{key:ae,class:"p-3 rounded-lg border-l-4",style:B([{borderLeftColor:P(W.severity)},{"border-color":"var(--bg-border)","background-color":"var(--bg-surface)"}])},[e("div",ql,[e("div",Rl,[e("div",zl,[e("span",Nl,c(W.name),1),e("span",{class:"px-2 py-1 rounded text-xs font-medium text-white",style:B({backgroundColor:P(W.severity)})},c(W.severity.toUpperCase()),5)]),e("p",Fl,c(W.description),1)])])],4))),128))])])):b("",!0),L.value.length>0?(t(),s("div",Bl,[V[11]||(V[11]=e("h4",{class:"text-sm font-semibold mb-3",style:{color:"var(--text-primary)"}},"Recommandations principales",-1)),e("ul",Hl,[(t(!0),s(q,null,N(L.value,(W,ae)=>(t(),s("li",{key:ae,class:"flex items-start gap-2 text-sm",style:{color:"var(--text-secondary)"}},[C(K,{name:"heroicons:light-bulb",class:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:"var(--accent-primary)"}}),e("span",null,c(W),1)]))),128))])])):b("",!0)])):b("",!0)])],8,cl)}}}),Kl=Object.assign(Xl,{__name:"DashboardVulnerabilityPanel"}),Zl={class:"space-y-4"},Wl={class:"flex items-center justify-between"},Jl={class:"flex items-center gap-2"},Ql=["disabled"],Gl={key:0},Yl={key:1,class:"inline-flex items-center gap-2"},ea={class:"animate-spin h-4 w-4",viewBox:"0 0 24 24",style:{color:"white"}},ta={class:"p-4 rounded-xl border",style:{"border-color":"var(--bg-border)","background-color":"var(--bg-surface)"}},sa={class:"flex gap-2"},oa=["disabled"],la={class:"flex items-center gap-2"},aa={key:0,class:"text-sm mt-1",style:{color:"#fca5a5"}},ra={class:"space-y-3"},na={key:0,class:"p-4 rounded-xl border",style:{"border-color":"var(--bg-border)"}},ia={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ca={class:"w-12 h-12 rounded-full grid place-items-center",style:{"background-color":"var(--bg-surface)",border:"1px solid var(--bg-border)"}},da={class:"text-sm font-bold",style:{color:"var(--text-primary)"}},ua={class:"text-xs font-semibold",style:{color:"var(--text-primary)"}},ma=le({__name:"SecurityScannerAccordion",emits:["items-autochecked"],setup(o,{expose:h,emit:n}){const l=n,d=g(),y=g(),m=g(),f=g(""),u=g(!1),i=g(!1),w=g(!1),I=g(!1),_=O(()=>d.value?.loading||m.value?.loading||y.value?.loading),x=O(()=>d.value?.hasResults||m.value?.hasResults||y.value?.hasResults),L=O(()=>{const p=[];return d.value?.score!==void 0&&p.push({key:"headers",label:"Headers",value:d.value.score}),y.value?.score!==void 0&&p.push({key:"vulnerabilities",label:"Vulnérabilités",value:y.value.score}),p}),T=()=>{if(!f.value){u.value=!1;return}try{const p=new URL(f.value);if(!["http:","https:"].includes(p.protocol)){u.value=!1;return}if(!p.hostname||!p.hostname.includes(".")){u.value=!1;return}u.value=!0}catch{u.value=!1}},R=async()=>{if(!f.value||!u.value)return;const p=[];d.value?.runScan&&p.push(d.value.runScan()),m.value?.runScan&&p.push(m.value.runScan()),y.value?.runScan&&p.push(y.value.runScan());try{await Promise.all(p)}catch{}},z=p=>{l("items-autochecked",p)},E=()=>{f.value="",u.value=!1,i.value=!1,w.value=!1,I.value=!1,d.value?.reset&&d.value.reset(),m.value?.reset&&m.value.reset(),y.value?.reset&&y.value.reset()},A=()=>{E()};ne(()=>{window.addEventListener("project-checklist-changed",A)}),ie(()=>{window.removeEventListener("project-checklist-changed",A)});const S=p=>({background:`conic-gradient(var(--accent-primary) ${p*3.6}deg, var(--bg-border) 0)`});return h({reset:E}),(p,r)=>{const a=X;return t(),s("div",Zl,[e("div",Wl,[r[5]||(r[5]=e("div",{class:"text-base font-semibold",style:{color:"var(--text-primary)"}},"Scanner de Sécurité",-1)),e("div",Jl,[e("button",{onClick:R,disabled:_.value||!f.value||!u.value,class:U(["btn btn-primary btn-sm",{"opacity-50 cursor-not-allowed":!f.value||!u.value}])},[_.value?(t(),s("span",Yl,[(t(),s("svg",ea,r[3]||(r[3]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))),r[4]||(r[4]=G(" Scan en cours... ",-1))])):(t(),s("span",Gl,"Scanner complet"))],10,Ql)])]),e("div",ta,[r[7]||(r[7]=e("label",{class:"block text-sm mb-2",style:{color:"var(--text-secondary)"}},"URL à scanner",-1)),e("div",sa,[F(e("input",{"onUpdate:modelValue":r[0]||(r[0]=P=>f.value=P),type:"url",required:"",placeholder:"https://example.com",class:U(["flex-1 px-3 py-2 rounded-lg border text-sm",{"border-red-500":f.value&&!u.value}]),style:{"background-color":"var(--bg-primary)","border-color":"var(--bg-border)",color:"var(--text-primary)"},onInput:T},null,34),[[H,f.value]]),e("button",{onClick:R,disabled:_.value||!f.value||!u.value,class:U(["btn btn-primary",{"opacity-50 cursor-not-allowed":!f.value||!u.value}])},[e("div",la,[C(a,{name:"heroicons:shield-check",class:"w-4 h-4"}),r[6]||(r[6]=e("span",{class:"hidden sm:inline"},"Scanner tout",-1))])],10,oa)]),r[8]||(r[8]=e("div",{class:"text-xs mt-2",style:{color:"var(--text-secondary)"}}," Cette URL sera utilisée pour tous les scans. Vous pouvez lancer l’ensemble ou chaque section séparément. ",-1)),f.value&&!u.value?(t(),s("div",aa," Veuillez entrer une URL valide (ex: https://example.com) ")):b("",!0)]),e("div",ra,[C(il,{ref_key:"headersPanel",ref:d,url:f.value,"is-valid-url":u.value,"is-open":i.value,"onUpdate:isOpen":r[1]||(r[1]=P=>i.value=P),onItemsAutochecked:z},null,8,["url","is-valid-url","is-open"]),C(Kl,{ref_key:"vulnerabilityPanel",ref:y,url:f.value,"is-valid-url":u.value,"is-open":I.value,"onUpdate:isOpen":r[2]||(r[2]=P=>I.value=P),onItemsAutochecked:z},null,8,["url","is-valid-url","is-open"])]),x.value?(t(),s("div",na,[r[9]||(r[9]=e("h3",{class:"font-semibold mb-3",style:{color:"var(--text-primary)"}},"Résumé de Sécurité",-1)),e("div",ia,[(t(!0),s(q,null,N(L.value,P=>(t(),s("div",{key:P.key,class:"text-center"},[e("div",{class:"mx-auto mb-2 w-16 h-16 rounded-full grid place-items-center",style:B(S(P.value))},[e("div",ca,[e("span",da,c(P.value),1)])],4),e("div",ua,c(P.label),1)]))),128))])])):b("",!0)])}}}),va=Object.assign(ma,{__name:"DashboardSecurityScannerAccordion"}),pa={class:"w-full"},ha={key:0,class:"mb-2 flex items-center justify-between"},ya={class:"text-sm font-medium text-gray-700"},fa={class:"flex items-center gap-2 text-xs"},xa=["rows","placeholder","value"],ba=le({__name:"CodeEditor",props:{modelValue:{default:""},placeholder:{default:""},label:{default:""},rows:{default:10},cleanMarkdown:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:h}){const n=o,l=h,d=i=>{const w=i.target.value;l("update:modelValue",w)},y=()=>l("update:modelValue",""),m=async()=>{try{await navigator.clipboard.writeText(n.modelValue||"")}catch{}},f=i=>(i||"").replace(/```[a-zA-Z]*\s*/g,"").replace(/```/g,"").trim(),u=()=>{if(!n.cleanMarkdown)return;const i=f(n.modelValue);l("update:modelValue",i)};return(i,w)=>(t(),s("div",pa,[i.label?(t(),s("div",ha,[e("label",ya,c(i.label),1),e("div",fa,[i.cleanMarkdown?(t(),s("button",{key:0,class:"btn-xs",onClick:u},"Nettoyer Markdown")):b("",!0),e("button",{class:"btn-xs",onClick:m},"Copier"),e("button",{class:"btn-xs",onClick:y},"Vider")])])):b("",!0),e("textarea",{rows:i.rows,placeholder:i.placeholder,class:"textarea font-mono",value:i.modelValue,onInput:d},null,40,xa)]))}}),ke=Object.assign(ue(ba,[["__scopeId","data-v-f1724d2e"]]),{__name:"CommonCodeEditor"}),ga={class:"card p-4 rounded-xl"},ka={class:"flex gap-2 mb-4"},_a={key:0,class:"space-y-3"},wa={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},$a={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ca={key:0,class:"mt-3 space-y-2"},ja={key:0,class:"p-3 rounded-md bg-emerald-50 text-emerald-800 border border-emerald-200"},Sa={key:1,class:"space-y-2"},Pa={key:0},Ia={class:"font-medium"},Ea={class:"list-disc ml-5"},Aa={key:1},Ta={class:"font-medium"},Va={class:"list-disc ml-5"},La={key:2,class:"text-xs text-gray-500"},Ma={key:1,class:"space-y-3"},Oa={class:"flex items-center gap-2"},Ua=["disabled"],Da={key:0},qa={key:1},Ra={key:0,class:"text-red-600 text-sm"},za={key:0,class:"list-disc ml-5 mt-3"},Na={key:1,class:"p-3 rounded-md bg-emerald-50 text-emerald-800 border border-emerald-200 mt-3"},Fa={key:2,class:"space-y-3"},Ba={class:"flex items-center gap-2"},Ha=["disabled"],Xa={key:0},Ka={key:1},Za={key:0,class:"text-red-600 text-sm"},Wa={key:0,class:"list-disc ml-5 mt-3"},Ja=le({__name:"AppPreflightAccordion",setup(o,{expose:h}){const n=g("meta"),l=g({ios:{name:"",subtitle:"",keywords:"",promotionalText:"",description:"",releaseNotes:""},android:{title:"",shortDescription:"",fullDescription:"",releaseNotes:""}}),d=g(null),y=g([]),m=g([]),f=g(!1),u=g(""),i=g(null),w=g(!1),I=g(null),_=g(""),x=g(null),L=g(!1),T=g(null),R=async()=>{const p={platform:"both",data:{name:l.value.ios.name,subtitle:l.value.ios.subtitle,keywords:l.value.ios.keywords,promotionalText:l.value.ios.promotionalText,description:l.value.ios.description,releaseNotes:l.value.ios.releaseNotes,title:l.value.android.title,shortDescription:l.value.android.shortDescription,fullDescription:l.value.android.fullDescription,androidReleaseNotes:l.value.android.releaseNotes}};d.value=await $fetch("/api/mobile/metadata",{method:"POST",body:p}),y.value=d.value?.issues?.ios||[],m.value=d.value?.issues?.android||[],f.value=y.value.length===0&&m.value.length===0},z=async()=>{w.value=!0,I.value=null,i.value=null;try{const p=(u.value||"").replace(/```[a-zA-Z]*\s*/g,"").replace(/```/g,"").trim();i.value=await $fetch("/api/mobile/ios-plist",{method:"POST",body:{plist:p}}),i.value||(I.value="Aucun résultat reçu.")}catch(p){const r=p?.data?.statusMessage||p?.message;I.value=r||"Analyse échouée. Vérifiez que vous collez le Info.plist brut (XML)."}finally{w.value=!1}},E=async()=>{L.value=!0,T.value=null,x.value=null;try{const p=(_.value||"").replace(/```[a-zA-Z]*\s*/g,"").replace(/```/g,"").trim();x.value=await $fetch("/api/mobile/android-manifest",{method:"POST",body:{manifestXml:p}})}catch(p){T.value=p?.data?.statusMessage||p?.message||"Analyse échouée. Vérifiez le XML."}finally{L.value=!1}},A=()=>{n.value="meta",l.value={ios:{name:"",subtitle:"",keywords:"",promotionalText:"",description:"",releaseNotes:""},android:{title:"",shortDescription:"",fullDescription:"",releaseNotes:""}},d.value=null,y.value=[],m.value=[],f.value=!1,u.value="",i.value=null,w.value=!1,I.value=null,_.value="",x.value=null,L.value=!1,T.value=null},S=()=>{A()};return ne(()=>{window.addEventListener("project-checklist-changed",S)}),ie(()=>{window.removeEventListener("project-checklist-changed",S)}),h({reset:A}),(p,r)=>(t(),s("div",ga,[e("div",ka,[e("button",{class:U(["btn",{"btn-primary":n.value==="meta"}]),onClick:r[0]||(r[0]=a=>n.value="meta")},"Métadonnées",2),e("button",{class:U(["btn",{"btn-primary":n.value==="ios"}]),onClick:r[1]||(r[1]=a=>n.value="ios")},"iOS (Info.plist)",2),e("button",{class:U(["btn",{"btn-primary":n.value==="android"}]),onClick:r[2]||(r[2]=a=>n.value="android")},"Android (Manifest)",2)]),n.value==="meta"?(t(),s("div",_a,[e("div",wa,[F(e("input",{"onUpdate:modelValue":r[3]||(r[3]=a=>l.value.ios.name=a),placeholder:"Nom (iOS) ≤ 30",class:"input"},null,512),[[H,l.value.ios.name]]),F(e("input",{"onUpdate:modelValue":r[4]||(r[4]=a=>l.value.ios.subtitle=a),placeholder:"Sous‑titre ≤ 30",class:"input"},null,512),[[H,l.value.ios.subtitle]]),F(e("input",{"onUpdate:modelValue":r[5]||(r[5]=a=>l.value.ios.keywords=a),placeholder:"Mots‑clés (≤100)",class:"input"},null,512),[[H,l.value.ios.keywords]]),F(e("input",{"onUpdate:modelValue":r[6]||(r[6]=a=>l.value.ios.promotionalText=a),placeholder:"Texte promo ≤ 170",class:"input"},null,512),[[H,l.value.ios.promotionalText]])]),F(e("textarea",{"onUpdate:modelValue":r[7]||(r[7]=a=>l.value.ios.description=a),rows:"4",placeholder:"Description iOS ≤ 4000",class:"textarea"},null,512),[[H,l.value.ios.description]]),F(e("input",{"onUpdate:modelValue":r[8]||(r[8]=a=>l.value.ios.releaseNotes=a),placeholder:"Notes de version iOS ≤ 4000",class:"input"},null,512),[[H,l.value.ios.releaseNotes]]),r[16]||(r[16]=e("hr",{class:"my-3"},null,-1)),e("div",$a,[F(e("input",{"onUpdate:modelValue":r[9]||(r[9]=a=>l.value.android.title=a),placeholder:"Titre (Android) ≤ 30",class:"input"},null,512),[[H,l.value.android.title]]),F(e("input",{"onUpdate:modelValue":r[10]||(r[10]=a=>l.value.android.shortDescription=a),placeholder:"Courte description ≤ 80",class:"input"},null,512),[[H,l.value.android.shortDescription]])]),F(e("textarea",{"onUpdate:modelValue":r[11]||(r[11]=a=>l.value.android.fullDescription=a),rows:"4",placeholder:"Description Android ≤ 4000",class:"textarea"},null,512),[[H,l.value.android.fullDescription]]),F(e("input",{"onUpdate:modelValue":r[12]||(r[12]=a=>l.value.android.releaseNotes=a),placeholder:"Notes de version Android ≤ 500",class:"input"},null,512),[[H,l.value.android.releaseNotes]]),e("div",{class:"flex gap-2"},[e("button",{class:"btn btn-primary",onClick:R},"Vérifier")]),d.value?(t(),s("div",Ca,[r[15]||(r[15]=e("p",{class:"font-medium"},"Résultats",-1)),f.value?(t(),s("div",ja," Aucun problème détecté selon ces règles. ")):(t(),s("div",Sa,[y.value.length?(t(),s("div",Pa,[e("p",Ia,"iOS ("+c(y.value.length)+")",1),e("ul",Ea,[(t(!0),s(q,null,N(y.value,(a,P)=>(t(),s("li",{key:"ios"+P},c(a),1))),128))])])):b("",!0),m.value.length?(t(),s("div",Aa,[e("p",Ta,"Android ("+c(m.value.length)+")",1),e("ul",Va,[(t(!0),s(q,null,N(m.value,(a,P)=>(t(),s("li",{key:"andr"+P},c(a),1))),128))])])):b("",!0)])),d.value?.hints?(t(),s("p",La,"iOS: "+c(d.value.hints.ios)+" | Android: "+c(d.value.hints.android),1)):b("",!0)])):b("",!0)])):n.value==="ios"?(t(),s("div",Ma,[C(ke,{modelValue:u.value,"onUpdate:modelValue":r[13]||(r[13]=a=>u.value=a),rows:12,label:"Info.plist (XML)",placeholder:"Collez votre Info.plist (XML)","clean-markdown":!0},null,8,["modelValue"]),e("div",Oa,[e("button",{class:"btn btn-primary",disabled:w.value,onClick:z},[w.value?(t(),s("span",Da,"Analyse…")):(t(),s("span",qa,"Analyser"))],8,Ua),I.value?(t(),s("span",Ra,c(I.value),1)):b("",!0)]),i.value&&i.value.issues&&i.value.issues.length?(t(),s("ul",za,[(t(!0),s(q,null,N(i.value.issues,(a,P)=>(t(),s("li",{key:P},c(a),1))),128))])):i.value&&!I.value?(t(),s("div",Na," Aucun problème détecté selon ces règles. ")):b("",!0)])):(t(),s("div",Fa,[C(ke,{modelValue:_.value,"onUpdate:modelValue":r[14]||(r[14]=a=>_.value=a),rows:12,label:"AndroidManifest.xml",placeholder:"Collez votre AndroidManifest.xml","clean-markdown":!0},null,8,["modelValue"]),e("div",Ba,[e("button",{class:"btn btn-primary",disabled:L.value,onClick:E},[L.value?(t(),s("span",Xa,"Analyse…")):(t(),s("span",Ka,"Analyser"))],8,Ha),T.value?(t(),s("span",Za,c(T.value),1)):b("",!0)]),x.value?.issues?.length?(t(),s("ul",Wa,[(t(!0),s(q,null,N(x.value.issues,(a,P)=>(t(),s("li",{key:P},c(a),1))),128))])):b("",!0)]))]))}}),Qa=Object.assign(ue(Ja,[["__scopeId","data-v-920bcb40"]]),{__name:"DashboardAppPreflightAccordion"}),Ga={class:"px-4 lg:px-6 py-6 pb-24 w-full bg-[var(--bg-primary)]",style:{height:"calc(100vh - 77px)"}},Ya={key:0,class:"card p-6 mb-6",style:{"background-color":"var(--bg-surface)",border:"1px solid var(--bg-border)"}},er={class:"flex items-start justify-between mb-4"},tr=["title","aria-label"],sr={class:"text-sm font-semibold"},or={class:"flex items-center justify-center gap-6 text-sm"},lr={class:"text-center"},ar={class:"text-2xl font-bold",style:{color:"var(--text-primary)"}},rr={class:"text-xs font-medium",style:{color:"var(--text-secondary)"}},nr={class:"text-center"},ir={class:"text-2xl font-bold",style:{color:"var(--text-primary)"}},cr={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start"},dr={class:"lg:col-span-2"},ur={class:"lg:col-span-1"},mr={key:0,class:"hidden lg:block"},vr={key:1,class:"block lg:hidden"},pr={key:2},hr={key:3},yr={key:2,class:"min-h-[calc(100vh-200px)] flex items-center justify-center"},fr={class:"text-base text-gray-600 dark:text-gray-300"},$r={__name:"dashboard",setup(o,{expose:h}){const n=g(null),l=g(null),d=g(null),y=g(null),m=g(null),f=g(!1),u=g(!1),i=de(),{currentUser:w}=me(),I=O(()=>i.hasProjects),_=O(()=>i.currentProjectId),x=O(()=>i.currentProject);oe([x,I],([S,p])=>{p&&S&&!S.checklistType&&he("/select-checklist")},{immediate:!0}),oe(_,async(S,p)=>{if(S&&S!==p)try{await re();const r=x.value?.checklistType;r==="security-checker"?m.value&&await m.value.reset():r==="appstore-preflight"?y.value&&await y.value.reset():(l.value&&await l.value.reset(),d.value&&await d.value.reset())}catch{}}),ne(()=>{f.value=!0,window.addEventListener("reset-checklist-progress",T)});const L=S=>{S&&!S.checklistType&&he("/select-checklist")},T=()=>{n.value&&n.value.resetProgress&&n.value.resetProgress()},R=async S=>{try{const p=i.currentProjectId;if(!p||!w?.value)return;const r=i.getCheckedSet(p);S.forEach(a=>r.add(a)),i.setCheckedForProject(p,r),await i.saveProjectChecked(w.value.uid,p),window.dispatchEvent(new CustomEvent("checked-items-updated",{detail:{projectId:p,itemIds:S}}))}catch{}},z=()=>{u.value=!0},E=()=>{n.value&&n.value.resetProgress&&(n.value.resetProgress(),window.dispatchEvent(new CustomEvent("reset-checklist-progress"))),u.value=!1},A=()=>{u.value=!1};return ie(()=>{window.removeEventListener("reset-checklist-progress",T)}),h({handleResetProgress:T}),(S,p)=>{const r=X;return t(),s(q,null,[e("div",Ga,[f.value&&_.value&&x.value?.checklistType?(t(),s("div",Ya,[e("div",er,[p[1]||(p[1]=e("div",{class:"flex-1"},[e("div",{class:"text-center mb-2"},[e("h1",{class:"text-2xl font-bold",style:{color:"var(--text-primary)"}},"Checklist Pré-Déploiement"),e("p",{class:"text-sm",style:{color:"var(--text-secondary)"}},"Vérifiez tous les aspects essentiels avant de mettre votre site en ligne")])],-1)),e("button",{onClick:z,class:"flex items-center space-x-3 px-5 py-3 rounded-xl transition-all duration-200 hover:shadow-lg hover:bg-opacity-90",style:{backgroundColor:"var(--button-bg)",borderColor:"var(--button-border)",color:"var(--text-primary)"},title:S.$t("common.resetTitle"),"aria-label":S.$t("common.resetDescription")},[C(r,{name:"heroicons:arrow-path",class:"w-5 h-5",style:{color:"var(--text-secondary)"},"aria-hidden":"true"}),e("span",sr,c(S.$t("common.reset")),1)],8,tr)]),e("div",or,[e("div",lr,[e("div",ar,c(te(i).currentProjectScores?.completedItems||0),1),e("div",rr,"sur "+c(te(i).currentProjectScores?.totalItems||44)+" complétés",1)]),p[3]||(p[3]=e("div",{class:"w-px h-8",style:{"background-color":"var(--bg-border)"}},null,-1)),e("div",nr,[e("div",ir,c(Math.round(te(i).currentProjectScores?.percentage||0))+"%",1),p[2]||(p[2]=e("div",{class:"text-xs font-medium",style:{color:"var(--text-secondary)"}},"progression",-1))])])])):b("",!0),f.value&&_.value&&x.value?.checklistType?(t(),s("div",cr,[e("div",dr,[C(qs,{ref_key:"seoChecklist",ref:n,"current-project-id":_.value,"checklist-type":te(i).currentProject?.checklistType||"web-prelaunch"},null,8,["current-project-id","checklist-type"])]),e("div",ur,[x.value?.checklistType!=="security-checker"&&x.value?.checklistType!=="appstore-preflight"?(t(),s("div",mr,[C(ge,{ref_key:"lighthouseAccordion",ref:l,"default-expanded":!0,"project-type":x.value?.checklistType},null,8,["project-type"])])):b("",!0),x.value?.checklistType!=="security-checker"&&x.value?.checklistType!=="appstore-preflight"?(t(),s("div",vr,[C(ge,{ref_key:"lighthouseAccordionMobile",ref:d,"default-expanded":!1,"project-type":x.value?.checklistType},null,8,["project-type"])])):b("",!0),x.value?.checklistType==="appstore-preflight"?(t(),s("div",pr,[C(Qa,{ref_key:"appPreflightAccordion",ref:y},null,512)])):b("",!0),x.value?.checklistType==="security-checker"?(t(),s("div",hr,[C(va,{ref_key:"securityScannerAccordion",ref:m,onItemsAutochecked:R},null,512)])):b("",!0)])])):(t(),s("div",yr,[C(Xe,{onCreateProject:L})]))]),C(Le,{"is-open":u.value,"onUpdate:isOpen":p[0]||(p[0]=a=>u.value=a),title:S.$t("common.resetTitle"),onClose:A},{footer:be(()=>[e("button",{onClick:A,class:"px-4 py-2 rounded-lg font-medium transition-colors duration-200 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},c(S.$t("common.cancel")),1),e("button",{onClick:E,class:"px-4 py-2 rounded-lg font-medium transition-colors duration-200 bg-emerald-500 text-white hover:bg-emerald-600"},c(S.$t("common.reset")),1)]),default:be(()=>[e("p",fr,c(S.$t("common.resetConfirm")),1)]),_:1},8,["is-open","title"])],64)}}};export{$r as default};
