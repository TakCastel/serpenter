import{k as b,r as n,l as f,m as A,s as E,G as l,p as o,q as c,v as m,x as h,y as P,z as v,A as W}from"./-Ay7-MNe.js";function I(){const{$auth:e}=b();if(!e){const r=n(null),t=n(!1);return{user:r,currentUser:r,ready:t,isReady:t,signIn:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},signOut:async()=>{},logout:async()=>{},login:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},register:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},loginWithGoogle:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")},forgotPassword:async()=>{throw new Error("Auth indisponible (plugin Firebase non initialisé)")}}}const a=n(null),i=n(!1);f(e,r=>{a.value=r??null,i.value=!0}),A(e).then(r=>{}).catch(()=>{});const w=async()=>{const r=new l;await h(e,r)},g=async(r,t)=>{try{return await o(e,c),await v(e,r,t)}catch(s){throw s}},p=async(r,t)=>{try{return await o(e,c),await P(e,r,t)}catch(s){throw s}},y=async()=>{try{const r=new l;await o(e,c);try{return await m(e,r)}catch(t){if(t.code==="auth/popup-blocked"||t.code==="auth/popup-closed-by-user")return await h(e,r);throw t}}catch(r){throw r}},d=async r=>{try{return await E(e,r)}catch(t){throw t}},u=async()=>{try{await W(e);{const r=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s&&(s.startsWith("firebase:authUser:")||s.startsWith("firebase:"))&&r.push(s)}r.forEach(t=>localStorage.removeItem(t))}}catch(r){throw r}};return{user:a,currentUser:a,ready:i,isReady:i,signIn:w,signOut:u,logout:u,login:g,register:p,loginWithGoogle:y,forgotPassword:d}}export{I as u};
